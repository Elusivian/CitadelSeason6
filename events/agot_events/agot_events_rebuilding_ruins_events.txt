namespace = agot_rebuilding_ruins

####################################
# 		    Charcoal Sellers	   #
#        ZombieSchrodCat		   #
#              0001  	           #
####################################

agot_rebuilding_ruins.0001 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0001.t
	desc = agot_rebuilding_ruins.0001.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_rational
	}

	lower_center_portrait = {
		character = scope:agot_rebuilding_charcoal
		animation = personality_rational
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_charcoal
		}
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_peasant_character
			dynasty = none
			gender = male
			save_scope_as = agot_rebuilding_charcoal
		}
		add_character_flag = {
			flag = agot_ruins_event_charcoal
			years = 25
		}
	}

	option = { #
		name = agot_rebuilding_ruins.0001.a
		custom_tooltip = agot_rebuilding_ruins.0001.a.tt
		add_dread = minor_dread_gain
		add_prestige = minor_prestige_loss
		scope:agot_rebuilding_charcoal = {
			death = {
				death_reason = death_execution
				killer = root
			}
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = wrathful
				}
			}
			random = {
				chance = 10
				add_trait = wrathful
			}
		}
	}

	option = {
		name = agot_rebuilding_ruins.0001.b
		custom_tooltip = agot_rebuilding_ruins.0001.b.tt
		duel = {
			skill = diplomacy
			target = scope:agot_rebuilding_charcoal
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0001.win.title
					add_prestige = minor_prestige_gain
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0001.lose.title
					remove_short_term_gold = 50
					add_prestige = minor_prestige_loss
				}
			}
		}

	}

	option = {
		name = agot_rebuilding_ruins.0001.c
		custom_tooltip = agot_rebuilding_ruins.0001.c.tt
		remove_short_term_gold = 50
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = generous
				}
			}
			random = {
				chance = 10
				add_trait = generous
			}
		}
	}

	after = {
		if = {
			limit = { scope:agot_rebuilding_charcoal = { is_alive = yes } }
			hidden_effect = {
				scope:agot_rebuilding_charcoal = {
					death = { death_reason = death_vanished }
				}
			}	
		}
	}
}

####################################
# 		 Small - Bandits Hideout   #
#        ZombieSchrodCat		   #
#              0002  	           #
####################################

agot_rebuilding_ruins.0002 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0002.t
	desc = agot_rebuilding_ruins.0002.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_rational
	}

	lower_center_portrait = {
		character = scope:agot_ruins_small_bandits
		animation = personality_rational
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_small_bandits
		}
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_ruin_warrior
			dynasty = none
			gender = male
			save_scope_as = agot_ruins_small_bandits
		}
		add_character_flag = {
			flag = agot_ruins_event_small_bandits
			years = 25
		}
	}

	option = { #kill them, take the loot
		name = agot_rebuilding_ruins.0002.a
		custom_tooltip = agot_rebuilding_ruins.0002.a.tt
		add_piety = minor_piety_gain
		add_prestige = minor_prestige_gain
		imprison = {
			target = scope:agot_ruins_small_bandits
			type = dungeon
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = just
				}
			}
			random = {
				chance = 10
				add_trait = just
			}
		}
	}

	option = { #kill them, take the loot
		name = agot_rebuilding_ruins.0002.b
		custom_tooltip = agot_rebuilding_ruins.0002.b.tt
		add_dread = minor_dread_gain
		add_prestige = minor_prestige_gain
		add_piety = minor_piety_loss
		scope:agot_ruins_small_bandits = {
			death = {
				death_reason = death_execution
				killer = root
			}
		}
		random_list = {
			40 = {
				add_gold = 50
			}
			30 = {
				add_gold = 5
			}
			20 = {
				add_gold = 10
			}
			10 = {
				add_gold = 100
			}
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = wrathful
				}
			}
			random = {
				chance = 10
				add_trait = wrathful
			}
		}
	}
	option = { #hire him
		name = agot_rebuilding_ruins.0002.c
		custom_tooltip = agot_rebuilding_ruins.0002.c.tt
		add_prestige = minor_prestige_loss
		add_piety = minor_piety_gain
		add_courtier = scope:agot_ruins_small_bandits
		reverse_add_opinion = {
			modifier = grateful_opinion
			target = scope:agot_ruins_small_bandits
			opinion = 50
		}
		spawn_army = {
			men_at_arms = {
				type = bowmen
				stacks = 1
			}
			inheritable = no
			location = capital_province
			name = event_troop_default_name
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = arbitrary
				}
			}
			random = {
				chance = 10
				add_trait = arbitrary
			}
		}
	}
}

####################################
# 		   Buried Treasure     	   #
#        ZombieSchrodCat		   #
#              0003  	           #
####################################

agot_rebuilding_ruins.0003 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0003.t
	desc = agot_rebuilding_ruins.0003.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = corridor_night
	}

	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_buried_treasure
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_buried_treasure
			years = 5
		}
	}

	option = {
		name = agot_rebuilding_ruins.0003.a
		custom_tooltip = agot_rebuilding_ruins.0003.a.tt
		random_list = {
			40 = {
				add_gold = 50
			}
			30 = {
				add_gold = 5
			}
			20 = {
				add_gold = 10
			}
			10 = {
				add_gold = 100
			}
		}
	}
}

####################################
# 		   Bandit Attack  	       #
#        ZombieSchrodCat		   #
#              0004  	           #
####################################

agot_rebuilding_ruins.0004 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0004.t
	desc = agot_rebuilding_ruins.0004.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = burning_building
	}

	right_portrait = {
		character = root
		animation = aggressive_sword
	}

	left_portrait = {
		character = scope:agot_ruins_bandit_attack
		animation = aggressive_axe
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_bandit_attack
		}
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_ruin_warrior
			gender = male
			save_scope_as = agot_ruins_bandit_attack
		}
		add_character_flag = {
			flag = agot_ruins_event_bandit_attack
			years = 25
		}
	}

	option = { #
		name = agot_rebuilding_ruins.0004.a
		custom_tooltip = agot_rebuilding_ruins.0004.a.tt
		duel = {
			skill = martial
			target = scope:agot_ruins_bandit_attack
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0004.a.win.title
					add_prestige = minor_prestige_gain
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0004.a.lose.title
					random_list = {
						40 = {
							remove_short_term_gold = 50
						}
						30 = {
							remove_short_term_gold = 5
						}
						20 = {
							remove_short_term_gold = 10
						}
						10 = {
							remove_short_term_gold = 100
						}
					}
					add_prestige = minor_prestige_loss
				}
			}
		}
		hidden_effect = {
			scope:agot_ruins_bandit_attack = {
				death = { death_reason = death_vanished }
			}
		}
	}

	option = {
		name = agot_rebuilding_ruins.0004.b
		custom_tooltip = agot_rebuilding_ruins.0004.b.tt
		duel = {
			skill = prowess
			target = scope:agot_ruins_bandit_attack
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0004.b.win.title
					add_prestige = medium_prestige_gain
					scope:agot_ruins_bandit_attack = {
						death = {
							death_reason = death_attacked
							killer = root
						}
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0004.b.lose.title
				random_list = {
					40 = {
						remove_short_term_gold = 50
					}
					30 = {
						remove_short_term_gold = 5
					}
					20 = {
						remove_short_term_gold = 10
					}
					10 = {
						remove_short_term_gold = 100
					}
				}
					add_prestige = minor_prestige_loss
					random = {
						chance = 20
						increase_wounds_effect = {
						REASON = pilgrimage_bandit_attack
						}
					}
				}
			}
		}

	}

	option = {
		name = agot_rebuilding_ruins.0004.c
		custom_tooltip = agot_rebuilding_ruins.0004.c.tt
		random_list = {
			40 = {
				remove_short_term_gold = 50
			}
			30 = {
				remove_short_term_gold = 5
			}
			20 = {
				remove_short_term_gold = 10
			}
			10 = {
				remove_short_term_gold = 100
			}
		}
		add_prestige = medium_prestige_loss
		hidden_effect = {
			scope:agot_ruins_bandit_attack = {
				death = { death_reason = death_vanished }
			}
		}

	}
}

####################################
# 		  Ghost Stories  	       #
#        ZombieSchrodCat		   #
#              0005  	           #
####################################

agot_rebuilding_ruins.0005 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0005.t
	desc = agot_rebuilding_ruins.0005.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = throne_room
	}

	right_portrait = {
		character = root
		animation = disapproval
	}

	left_portrait = {
		character = scope:agot_ghost_story_knight
		animation = paranoia
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		any_knight = {
			is_human = yes
			NOR = {
				has_trait = brave
				has_trait = craven
				has_trait = mute
			}
		}
		NOT = {
			has_character_flag = agot_ruins_event_ghost_stories
		}
	}

	immediate = {
		random_courtier = {
			limit = {
				is_human = yes
				is_knight = yes
				NOR = {
					has_trait = brave
					has_trait = craven
					has_trait = mute
				}
			}
			save_scope_as = agot_ghost_story_knight
		}
		add_character_flag = {
			flag = agot_ruins_event_ghost_stories
			years = 25
		}
	}

	option = { #stay the night and put a end to this
		name = agot_rebuilding_ruins.0005.a
		custom_tooltip = agot_rebuilding_ruins.0005.a.tt
			trigger = {
				NOR = {
					has_trait = brave
					has_trait = craven
					has_trait = mute
				}
			}
		hidden_effect = {
			random_list = {
				50 = {
					trigger_event = agot_rebuilding_ruins.0006
				}
				40 = {
					trigger_event = agot_rebuilding_ruins.0007
				}
				10 = {
					trigger_event = agot_rebuilding_ruins.0008
				}
			}
		}

	}

	option = { #ignore the rumors
		name = agot_rebuilding_ruins.0005.b
		custom_tooltip = agot_rebuilding_ruins.0005.b.tt
		add_character_modifier = {
			modifier = agot_ruins_ghost_stories
			years = 5
		}
	}

	option = { #berate the
		name = agot_rebuilding_ruins.0005.c
		custom_tooltip = agot_rebuilding_ruins.0005.c.tt
		duel = {
			skill = intrigue
			target = scope:agot_ghost_story_knight
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0005.c.win.title
					add_prestige = medium_prestige_gain
					scope:agot_ghost_story_knight = {
						if = {
							limit = {
								number_of_personality_traits < personality_trait_limit
							}
							add_trait = brave
						}
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0005.c.lose.title
					add_prestige = medium_prestige_loss
					scope:agot_ghost_story_knight = {
						if = {
							limit = {
								number_of_personality_traits < personality_trait_limit
							}
							add_trait = craven
						}
					}
				}
			}
		}
	}
}

agot_rebuilding_ruins.0006 = { #brave - good night
	type = character_event
	title = agot_rebuilding_ruins.0006.t
	desc = agot_rebuilding_ruins.0006.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_rational
	}

	option = { #stay the night and put a end to this
		name = agot_rebuilding_ruins.0006.a
		add_prestige = minor_prestige_gain
		random = {
			chance = 10
			add_trait = brave
		}
	}
}

agot_rebuilding_ruins.0007 = { #craven - bad night
	type = character_event
	title = agot_rebuilding_ruins.0007.t
	desc = agot_rebuilding_ruins.0007.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = fear
	}

	option = { #stay the night and put a end to this
		name = agot_rebuilding_ruins.0007.a
		add_prestige = minor_prestige_loss
		random = {
			chance = 10
			add_trait = craven
		}
	}
}

agot_rebuilding_ruins.0008 = { #ring - stressful night - end
	type = character_event
	title = agot_rebuilding_ruins.0008.t
	desc = agot_rebuilding_ruins.0008.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = stress
	}

	option = { #stay the night and put a end to this
		name = agot_rebuilding_ruins.0008.a
		add_stress = major_stress_gain
		create_artifact = {
			name = ruin_sigil_ring
			description = ruin_sigil_ring_desc
			type = regalia_simple
			visuals = ring
			modifier = agot_ruins_sigil_ring_modifier
			save_scope_as = ruin_sigil_ring
		}
	}
}

####################################
# 		 Black smith Cache         #
#        ZombieSchrodCat		   #
#              0009  	           #
####################################

agot_rebuilding_ruins.0009 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0009.t
	desc = agot_rebuilding_ruins.0009.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_black_smith_cache
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_black_smith_cache
			years = 10
		}
	}

	option = { #sell ingots
		name = agot_rebuilding_ruins.0009.a
		custom_tooltip = agot_rebuilding_ruins.0009.a.tt
		add_gold = 50
	}

	option = { #court smith.
		name = agot_rebuilding_ruins.0009.b
		custom_tooltip = agot_rebuilding_ruins.0009.b.tt
		trigger = {
			exists = root.court_position:antiquarian_court_position
		}
		remove_short_term_gold = 50
		hidden_effect = {
			random_list = {
				20 = {
				send_interface_toast = {
				title = agot_rebuilding_ruins.0009.sword.title
					create_artifact = {
						name = ruin_sword
						description = ruin_sword_desc
						type = sword
						visuals = sword
						modifier = artifact_prowess_3_modifier
						save_scope_as = ruin_sword
					}
				}
				}
				20 = {
				send_interface_toast = {
				title = agot_rebuilding_ruins.0009.mace.title
					create_artifact = {
						name = ruin_mace
						description = ruin_mace_desc
						type = mace
						visuals = mace
						modifier = artifact_prowess_3_modifier
						save_scope_as = ruin_mace
					}
					}
				}
				20 = {
				send_interface_toast = {
				title = agot_rebuilding_ruins.0009.spear.title
					create_artifact = {
						name = ruin_spear
						description = ruin_spear_desc
						type = spear
						visuals = spear
						modifier = artifact_prowess_3_modifier
						save_scope_as = ruin_spear
					}
				}
				}
				20 = {
				send_interface_toast = {
				title = agot_rebuilding_ruins.0009.dagger.title
					create_artifact = {
						name = ruin_dagger
						description = ruin_dagger_desc
						type = dagger
						visuals = dagger
						modifier = artifact_prowess_2_modifier
						save_scope_as = ruin_dagger
					}
				}
				}
				20 = {
				send_interface_toast = {
				title = agot_rebuilding_ruins.0009.axe.title
					create_artifact = {
						name = ruin_axe
						description = ruin_axe_desc
						type = axe
						visuals = axe
						modifier = artifact_prowess_3_modifier
						save_scope_as = ruin_axe
					}
				}
				}
			}
		}
	}
}

####################################
# 		   A Quick Decision  	   #
#        ZombieSchrodCat		   #
#             0010        		 #
####################################

agot_rebuilding_ruins.0010 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0010.t
	desc = agot_rebuilding_ruins.0010.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = corridor_night
	}

	right_portrait = {
		character = root
		animation = worry
	}

	lower_center_portrait = {
		character = scope:agot_rebuilding_ruin_block_head
		animation = worry
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_block_head
		}
	}

	immediate = {
		random_courtier = {
			limit = {
				is_human = yes
				is_adult = yes
			}
			save_scope_as = agot_rebuilding_ruin_block_head
		}
		add_character_flag = {
			flag = agot_ruins_event_block_head
			years = 10
		}

	}

	option = { #
		name = agot_rebuilding_ruins.0010.a
		custom_tooltip = agot_rebuilding_ruins.0010.a.tt
		add_piety = minor_piety_loss
		scope:agot_rebuilding_ruin_block_head ={
			random = {
				chance = 25
				increase_wounds_effect = { REASON = fall }
			}
		}
	}

	option = {
		name = agot_rebuilding_ruins.0010.b
		custom_tooltip = agot_rebuilding_ruins.0010.b.tt
		add_prestige = minor_prestige_gain
		add_piety = minor_piety_gain
		random = {
			chance = 25
			increase_wounds_effect = { REASON = fall }
		}
		add_hook = {
			target = scope:agot_rebuilding_ruin_block_head
			type = favor_hook
		}
	}
}

####################################
# 		  Options Set in Stone	   #
#        ZombieSchrodCat		   #
#              0011  	           #
####################################

agot_rebuilding_ruins.0011 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0011.t
	desc = agot_rebuilding_ruins.0011.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = corridor_night
	}

	right_portrait = {
		character = root
		animation = steward
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_new_stone
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_new_stone
			years = 25
		}
	}

	option = { #
		name = agot_rebuilding_ruins.0011.a
		remove_short_term_gold = 50
		add_character_modifier = {
			modifier = agot_rebuilding_new_stone
			years = 10
		}
	}

	option = {
		name = agot_rebuilding_ruins.0011.b
	}

}

####################################
# 		  In the Details    	   #
#        ZombieSchrodCat		   #
#              0012   	           #
####################################

agot_rebuilding_ruins.0012 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0012.t
	desc = agot_rebuilding_ruins.0012.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = corridor_night
	}

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_details
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_details
			years = 25
		}
	}

	option = {
		name = agot_rebuilding_ruins.0012.a
		custom_tooltip = agot_rebuilding_ruins.0012.a.tt
		add_prestige = minor_prestige_gain
		add_character_modifier = {
			modifier = agot_rebuilding_focused
			years = 5
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
				NOT = {
					has_trait = diligent
				}
			}
			random = {
				chance = 10
				add_trait = diligent
			}
		}
	}

	option = {
		name = agot_rebuilding_ruins.0012.b
		custom_tooltip = agot_rebuilding_ruins.0012.b.tt
		trigger = {
			stress >= 20
		}
		add_prestige = minor_prestige_gain
		add_stress = medium_stress_loss
	}
}

####################################
# 		  Bronze Slate      	   #
#        ZombieSchrodCat		   #
#              0013   	           #
####################################

agot_rebuilding_ruins.0013 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0013.t
	desc = agot_rebuilding_ruins.0013.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = shock
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		has_title = title:c_skane
		NOT = {
			has_character_flag = agot_ruins_event_bronze_god
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_bronze_god
			years = 50
		}
	}

	option = { #sell
		name = agot_rebuilding_ruins.0013.a
		custom_tooltip = agot_rebuilding_ruins.0013.a.tt
		add_gold = 10
	}

	option = { #decifer stone
		name = agot_rebuilding_ruins.0013.b
		custom_tooltip = agot_rebuilding_ruins.0013.b.tt
		trigger = {
			learning >= 15
		}
		trigger_event = agot_rebuilding_ruins.0014
	}

	option = { #decifer stone - send to maesters
		name = agot_rebuilding_ruins.0013.c
		custom_tooltip = agot_rebuilding_ruins.0013.c.tt
		remove_short_term_gold = 50
		trigger_event = agot_rebuilding_ruins.0014
	}
}

agot_rebuilding_ruins.0014 = { #understand stone
	type = character_event
	title = agot_rebuilding_ruins.0014.t
	desc = agot_rebuilding_ruins.0014.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = throne_room
	}

	right_portrait = {
		character = root
		animation = scheme
	}

	option = {
		name = agot_rebuilding_ruins.0014.a
		custom_tooltip = agot_rebuilding_ruins.0014.a.tt
		add_piety = minor_piety_loss
		trigger_event = agot_rebuilding_ruins.0015
	}

	option = {
		name = agot_rebuilding_ruins.0014.b
		custom_tooltip = agot_rebuilding_ruins.0014.b.tt
		add_gold = 150
		ai_chance = {
			base = 90
		}
	}
}

agot_rebuilding_ruins.0015 = { #preformed prayer
	type = character_event
	title = agot_rebuilding_ruins.0015.t
	desc = agot_rebuilding_ruins.0015.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = corridor_night
	}

	right_portrait = {
		character = root
		animation = personality_zealous
	}

	option = {
		name = agot_rebuilding_ruins.0015.a
		add_character_modifier = {
			modifier = agot_brozen_god_fanatic
			years = 25
		}
		set_character_faith = faith:bronze_gods
	}

	option = {
		name = agot_rebuilding_ruins.0015.b
		add_stress = minor_stress_gain
	}
}

####################################
# 		  Hardwork          	   #
#        ZombieSchrodCat		   #
#              0016   	           #
####################################

agot_rebuilding_ruins.0016 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0016.t
	desc = agot_rebuilding_ruins.0016.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_honorable
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_hardwork
			has_trait = lazy
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_ruins_event_hardwork
			years = 25
		}
	}

	option = {
		name = agot_rebuilding_ruins.0016.a
		add_prestige = minor_prestige_gain
		add_character_modifier = {
			modifier = agot_hardworker_ruins
			years = 5
		}
		random = {
			chance = 10
			add_trait = strong
		}
	}
}

####################################
# 		      Ruin Tourist      #
#        ZombieSchrodCat		   #
#              0017   	           #
####################################

agot_rebuilding_ruins.0017 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0017.t
	desc = agot_rebuilding_ruins.0017.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_rational
	}

	left_portrait = {
		character = scope:ruin_tourist
		animation = personality_rational
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_tourist
			has_trait = lazy
		}
		liege = {
			any_vassal = {
				is_adult = yes
			}
		}
	}

	immediate = {
		liege = {
			random_vassal = {
				limit = {
					is_adult = yes
					NOT = { this = root }
				}
				save_scope_as = ruin_tourist
			}
		}
		add_character_flag = {
			flag = agot_ruins_event_tourist
			years = 25
		}
	}

	option = { #martial
		name = agot_rebuilding_ruins.0017.a
		custom_tooltip = agot_rebuilding_ruins.0017.a.tt
		duel = {
			skill = martial
			target = scope:ruin_tourist
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0017.win.title
					add_prestige = minor_prestige_gain
					reverse_add_opinion = {
						modifier = pleased_opinion
						target = scope:ruin_tourist
						opinion = 20
					}
					if = {
						limit = {
							can_set_relation_potential_friend_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_friend = scope:ruin_tourist
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0017.lose.title
					add_prestige = minor_prestige_loss
					reverse_add_opinion = {
						modifier = insulted_opinion
						target = scope:ruin_tourist
						opinion = -20
					}
					if = {
						limit = {
							can_set_relation_potential_rival_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_rival = scope:ruin_tourist
					}
				}
			}
		}
	}
	option = { #steward
		name = agot_rebuilding_ruins.0017.b
		custom_tooltip = agot_rebuilding_ruins.0017.b.tt
		duel = {
			skill = stewardship
			target = scope:ruin_tourist
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0017.win.title
					add_prestige = minor_prestige_gain
					reverse_add_opinion = {
						modifier = pleased_opinion
						target = scope:ruin_tourist
						opinion = 20
					}
					if = {
						limit = {
							can_set_relation_potential_friend_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_friend = scope:ruin_tourist
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0001.lose.title
					add_prestige = minor_prestige_loss
					reverse_add_opinion = {
						modifier = insulted_opinion
						target = scope:ruin_tourist
						opinion = -20
					}
					if = {
						limit = {
							can_set_relation_potential_rival_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_rival = scope:ruin_tourist
					}
				}
			}
		}
	}
	option = { #diplomacy
		name = agot_rebuilding_ruins.0017.c
		custom_tooltip = agot_rebuilding_ruins.0017.c.tt
		duel = {
			skill = diplomacy
			target = scope:ruin_tourist
			50 = { #success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0017.win.title
					add_prestige = minor_prestige_gain
					reverse_add_opinion = {
						modifier = pleased_opinion
						target = scope:ruin_tourist
						opinion = 20
					}
					if = {
						limit = {
							can_set_relation_potential_friend_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_friend = scope:ruin_tourist
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_rebuilding_ruins.0017.lose.title
					add_prestige = minor_prestige_loss
					reverse_add_opinion = {
						modifier = insulted_opinion
						target = scope:ruin_tourist
						opinion = -20
					}
					if = {
						limit = {
							can_set_relation_potential_rival_trigger = { CHARACTER = scope:ruin_tourist }
						}
						set_relation_potential_rival = scope:ruin_tourist
					}
				}
			}
		}
	}
}

####################################
# 		   Girl from the Ruins	   #
#        ZombieSchrodCat		   #
#              0018  	           #
####################################

agot_rebuilding_ruins.0018 = { #start
	type = character_event
	title = agot_rebuilding_ruins.0018.t
	desc = agot_rebuilding_ruins.0018.desc

	theme = stewardship_domain_focus
	override_background = {
		reference = AGOT_ruins_generic
	}

	right_portrait = {
		character = root
		animation = personality_rational
	}

	left_portrait = {
		character = scope:ruin_jenye_fan
		animation = admiration
	}

	lower_center_portrait = {
		character = scope:agot_ruin_jenye
		animation = personality_rational
	}

	trigger = {
		any_held_title = {
			tier = tier_barony
			title_province = { has_holding_type = ruin_holding }
		}
		NOT = {
			has_character_flag = agot_ruins_event_jenye
		}
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_diplomacy_character
			name = Jenye
			dynasty = none
			gender = female
			age = 18
			trait = beauty_good_3
			trait = poet
			trait = compassionate
			save_scope_as = agot_ruin_jenye
		}
		random_courtier = {
			limit = {
				is_adult = yes
				is_human = yes
			}
			save_scope_as = ruin_jenye_fan
		}
		add_character_flag = {
			flag = agot_ruins_event_jenye
			years = 25
		}
	}

	option = { #
		name = agot_rebuilding_ruins.0018.a
		custom_tooltip = agot_rebuilding_ruins.0018.a.tt
		add_dread = minor_dread_loss
		add_prestige = minor_prestige_gain
		if = {
			limit = {
				has_trait = diligent
			}
			add_stress = minor_stress_gain
		}
		if = {
			limit = {
				NOT = {
					has_trait = diligent
				}
			}
			add_stress = minor_stress_loss
		}
		hidden_effect = {
			scope:agot_ruin_jenye = {
				death = { death_reason = death_vanished }
			}
		}
	}

	option = {
		name = agot_rebuilding_ruins.0018.b
		custom_tooltip = agot_rebuilding_ruins.0018.b.tt
		trigger = {
			can_employ_court_position_type = court_poet_court_position
		}
		reverse_add_opinion = {
			modifier = grateful_opinion
			target = scope:agot_ruin_jenye
			opinion = 25
		}
		add_courtier = scope:agot_ruin_jenye
		appoint_court_position = {
			recipient = scope:agot_ruin_jenye
			court_position = court_poet_court_position
		}
	}
}

#Moat Cailin
agot_rebuilding_ruins.1000 = { # Moat Cailin random events handler
	hidden = yes
	trigger = {
		title:c_moat_cailin.holder = {
			has_character_flag = rebuilding_moat_cailin
		}
	}

	immediate = {
		title:c_moat_cailin.holder = {
			random_list = {
				20 = {
				}
				40 = {
					trigger = {
						NOT = { has_character_flag = lizard_lion_hunting }
					}
					trigger_event = agot_rebuilding_ruins.1001
				}
				40 = {
					trigger = {
						NOT = { has_character_flag = maester_reading }
					}
					trigger_event = agot_rebuilding_ruins.1002
				}
			}
		}
	}
}

agot_rebuilding_ruins.1001 = {
	type = character_event
	title = agot_rebuilding_ruins.1001.t
	desc = agot_rebuilding_ruins.1001.desc

	theme = stewardship_domain_focus
	override_background = { reference = wilderness_wetlands }

	right_portrait = {
		character = root
		animation = sadness
	}

	immediate = {
		add_character_flag = lizard_lion
	}

	option = {
		name = agot_rebuilding_ruins.1001.a
		title:c_moat_cailin = {
			add_county_modifier = {
				modifier = agot_building_delayed
				months = 2
			}
		}
		add_prestige = -250
	}

	option = {
		name = agot_rebuilding_ruins.1001.b
		remove_short_term_gold = 250
		add_prestige = 300
	}

	option = {
		trigger = {
			culture = { has_cultural_parameter = unlock_maa_trackers }
		}
		name = agot_rebuilding_ruins.1001.c
		custom_tooltip = agot_rebuilding_ruins.1001.c.tt
		hidden_effect = {
			create_artifact_wall_skull_effect = {
				OWNER = root
				HUNTER = root
				LEGENDARY = no
				ANIMAL = flag:lizard_lion
			}
		}
		add_prestige = 300
	}

	option = {
		trigger = {
			OR = {
				has_trait = callous
				has_trait = sadistic
			}
		}
		name = agot_rebuilding_ruins.1001.d
		add_tyranny = massive_tyranny_value
		add_dread = major_dread_gain
	}

	option = {
		trigger = {
			AND = {
				has_trait = eccentric
				NOT = { has_trait = cannibal }
			}
		}
		name = agot_rebuilding_ruins.1001.e
		add_trait = cannibal
		title:c_moat_cailin = {
			add_county_modifier = {
				modifier = agot_building_delayed
				months = 2
			}
		}
		add_prestige = -250
		add_dread = major_dread_gain
	}

	after = {
		remove_character_flag = lizard_lion
		add_character_flag = lizard_lion_hunting
	}
}

agot_rebuilding_ruins.1002 = {
	type = character_event
	title = agot_rebuilding_ruins.1002.t
	desc = agot_rebuilding_ruins.1002.desc

	theme = stewardship_domain_focus
	override_background = { reference = wilderness_wetlands }

	immediate = {
		create_character = {
			location = root.capital_province
			template = maester_character
			save_scope_as = new_maester
			age = { 35 50 }
			dynasty = none
		}
	}

	right_portrait = {
		character = root
		animation = happiness
	}

	left_portrait = {
		character = scope:new_maester
		animation = happiness
	}

	option = {
		name = agot_rebuilding_ruins.1002.a

		random_list = {
			60 = {
				add_learning_skill = 1
			}
			30 = {
				add_learning_skill = 2
			}
			10 = {
				add_learning_skill = 3
			}
		}

		stress_impact = {
			paranoid = miniscule_stress_impact_gain
			lazy = miniscule_stress_impact_gain
			shy = miniscule_stress_impact_gain
			impatient = miniscule_stress_impact_gain
			inquisitive = miniscule_stress_impact_loss
			just = miniscule_stress_impact_loss
		}
	}

	option = {
		name = agot_rebuilding_ruins.1002.b

		custom_tooltip = agot_rebuilding_ruins.1002.a.tt
		hidden_effect = {
			save_scope_value_as = {
				name = should_be_trinket
				value = yes
			}
			create_artifact_book_effect = {
				OWNER = root
				CREATOR = scope:new_maester
				SET_SUBJECT = flag:learning
				SET_TOPIC = flag:no
			}
		}

		title:c_moat_cailin = {
			add_county_modifier = {
				modifier = agot_building_delayed
				months = 2
			}
		}

		stress_impact = {
			paranoid = miniscule_stress_impact_gain
			shy = miniscule_stress_impact_gain
			impatient = miniscule_stress_impact_gain
			inquisitive = miniscule_stress_impact_loss
			just = miniscule_stress_impact_loss
		}
	}

	option = {
		name = agot_rebuilding_ruins.1002.c

		stress_impact = {
			inquisitive = miniscule_stress_impact_gain
			impatient = miniscule_stress_impact_loss
			diligent = miniscule_stress_impact_loss
		}
	}

	option = {
		name = agot_rebuilding_ruins.1002.d
		trigger = { has_trait = inquisitive }

		add_learning_skill = 1
		title:c_moat_cailin = {
			add_county_modifier = {
				modifier = agot_building_delayed
				months = 2
			}
		}

		stress_impact = {
			paranoid = miniscule_stress_impact_gain
			shy = miniscule_stress_impact_gain
			impatient = miniscule_stress_impact_gain
			inquisitive = miniscule_stress_impact_loss
		}
	}

	after = {
		hidden_effect = { scope:new_maester = { death = { death_reason = death_vanished } } }
		add_character_flag = maester_reading
	}
}