namespace = agot_btw_struggle_maintenance
namespace = agot_btw_struggle_nightswatch

#AGOT TODO CHANGE THE ROLES BLOCKS
#AGOT TODO ADD AI WEIGHTS / WIP
#AGOT TODO ADD CHOOSE PRISONERS WIDGET
#AGOT TODO POST PETITION EVENT 2 NEEDS CODE
#AGOT TODO SCRIPTED EFFECTS FOR CLEARING THE VARIABLES AND ADDING STUFF NEED TO BE ADDED
#AGOT TODO FINISH MODIFERS THAT ARE IN 00_agot_nw_modifiers

####                                                 ####
#Events for Beyond the wall struggle, Written by Typical#
####												 ####
#
#agot_btw_struggle_maintenance.0001 - Non-Wildling/Not Winter holds BTW county, initiate monke mode >:)
#agot_btw_struggle_maintenance.0002 - Wildling/Winter holds BTW county / 50% autority mark achived, monke mode disengaged ;c
#agot_btw_struggle_maintenance.0003 - Wildling called neighbours to help fight the interloppers (called from character interaction)
#agot_btw_struggle_maintenance.0004 - wildling ruler accepted CTA, noice
#agot_btw_struggle_maintenance.0005 - wildling ruler accepted CTA, for an price. Greedy bastard
#agot_btw_struggle_maintenance.0006 - wildling decided to ignore your call... :/
#agot_btw_struggle_maintenance.0007 - wildling caller proposed one of his family members as payment to join
#agot_btw_struggle_maintenance.0008 - Wildling caller learns of greedy ally joining
#agot_btw_struggle_maintenance.0009 - Wildling caller learns of greedy ally rejecting offer ;c
#
###				   ###
#Night's Watch Events#
###				   ###
#
#agot_btw_struggle_nightswatch.01 - NW Petition Chain Start Event - Royal Court DLC owners
#agot_btw_struggle_nightswatch.02 - NW Petition Chain Start Event - Non Royal Court DLC owners + rulers with tier below required to have RC
#agot_btw_struggle_nightswatch.0100 - NW Petition Journey Random Event 1 - Hidden Tresure
#agot_btw_struggle_nightswatch.0101 - NW Petition Journey Random Event 2 - Volunteers
#agot_btw_struggle_nightswatch.0102 - NW Petition Journey Random Event 3 - Local Lord offers supplies
#agot_btw_struggle_nightswatch.0103 - NW Petition Journey Random Event 4 - Angry Peasant Mob
#agot_btw_struggle_nightswatch.0104 - NW Petition Journey Random Event 5 - Envoy mistaken for Bandit
#agot_btw_struggle_nightswatch.0105 - NW Petition Journey Random Event 6 - Drunk Envoy
#agot_btw_struggle_nightswatch.0106 - NW Petition Journey Random Event 7 - Envoy insults local knight
#agot_btw_struggle_nightswatch.0107 - NW Petition Journey Random Event 8 - Tavern Brawl
#agot_btw_struggle_nightswatch.0108 - NW Petition Journey Random Event 9 - Bandits Attack
#agot_btw_struggle_nightswatch.0109 - NW Petition Journey Random Event 10 - Local Animal attacks envoy
#agot_btw_struggle_nightswatch.0110 - NW Petition Journey Random Event Maintnence event 1
#agot_btw_struggle_nightswatch.0111 - NW Petition Journey Random Event Duel Ended tell results
#agot_btw_struggle_nightswatch.0112 - NW Petition Journey Random Event Duel Invalidated
#agot_btw_struggle_nightswatch.0113 - NW Petition Journey Random Event 4,9 - Envoy Flees
#agot_btw_struggle_nightswatch.0114 - NW Petition Journey Random Event 4,9 - Envoy is found
#agot_btw_struggle_nightswatch.0115 - NW Petition Journey Random Event 5 - Envoy shows he is not bandit
#agot_btw_struggle_nightswatch.0116 - NW Petition Journey Random Event 5 - Knight still thinks BB is bandit
#agot_btw_struggle_nightswatch.0117 - NW Petition Journey Random Event 10 - You Defeat the beast
#agot_btw_struggle_nightswatch.0118 - NW Petition Journey Random Event 10 - You Defeat the beast but are left wounded
#agot_btw_struggle_nightswatch.0119 - NW Petition Journey Random Event 10 - You Die lmao
#agot_btw_struggle_nightswatch.0120 - NW Petition Journey Random Event 10 - You are able to flee from the beast
#agot_btw_struggle_nightswatch.0200 - NW Post Petition Random event 1 - Lord's Family member want to join
#agot_btw_struggle_nightswatch.0201 - NW Post Petition Random event 2 - One of recruits is secretly an Female
#agot_btw_struggle_nightswatch.0202 - NW Post Petition Random event 3 - Recruit/s try to flee
#agot_btw_struggle_nightswatch.0203 - NW Post Petition Random event 4 - local Knight wants to join
#agot_btw_struggle_nightswatch.0204 - NW Post Petition Random event 5 - Blacksmith offers supplies
#agot_btw_struggle_nightswatch.0205 - NW Post Petition Random event 6 - Spoiled Supplies
#agot_btw_struggle_nightswatch.0206 - NW Post Petition Random event 7 - Supplies Thief
#agot_btw_struggle_nightswatch.0207 - NW Post Petition Random event 8 - You Got more supplies than you wanted
#agot_btw_struggle_nightswatch.0208 - NW Post Petition Random event 1 - Maintance Event 1
#agot_btw_struggle_nightswatch.0209 - NW Post Petition Random event 2 - Maintance Event 1
#agot_btw_struggle_nightswatch.0210 - NW Post Petition Random event 4 - Maintance Event 1
#agot_btw_struggle_nightswatch.0211 - NW Post Petition Random event 7 - Maintance Event 1
#agot_btw_struggle_nightswatch.0212 - NW Post Petition Random event 5 - Maintance Event 1
#agot_btw_struggle_nightswatch.0213 - NW Post Petition Random event 3 - Maintance Event 1
#agot_btw_struggle_nightswatch.01000 - Envoy starts his journey - RC DLC
#agot_btw_struggle_nightswatch.01001 - Envoy arrived to the targeted lord - RC DLC
#agot_btw_struggle_nightswatch.01002 - Envoy arrives to the lord (lord POV) RC Version
#agot_btw_struggle_nightswatch.01003 - Lord selects condition for acceptance of petition (lord POV) RC Version
#agot_btw_struggle_nightswatch.01004 - Envoy learns of ruler decision  RC Version
#agot_btw_struggle_nightswatch.01005 - Envoy succeed in persuadion RC Version  RC Version
#agot_btw_struggle_nightswatch.01006 - Envoy fails to persuade the ruler RC Version
#agot_btw_struggle_nightswatch.01007 - Lords decides if he is persuaded (lord POV) RC Version
#agot_btw_struggle_nightswatch.01008 - Envoy prepares to return to the wall RC Version
#agot_btw_struggle_nightswatch.01009 - Envoy learns of the ruler second decision RC Version
#agot_btw_struggle_nightswatch.01010 - Envoy returns to the wall RC Version
#agot_btw_struggle_nightswatch.02000 - Envoy starts his journey - Non RC DLC
#agot_btw_struggle_nightswatch.02001 - Envoy arrived to the targeted lord - Non RC DLC
#agot_btw_struggle_nightswatch.02002 - Envoy arrives to the lord (lord POV) Non-RC Version
#agot_btw_struggle_nightswatch.02003 - Lord selects condition for acceptance of petition (lord POV) Non-RC Version
#agot_btw_struggle_nightswatch.02004 - Envoy learns of ruler decision  Non-RC Version
#agot_btw_struggle_nightswatch.02005 - Envoy succeed in persuadion Non-RC Version  Non-RC Version
#agot_btw_struggle_nightswatch.02006 - Envoy fails to persuade the ruler Non-RC Version
#agot_btw_struggle_nightswatch.02007 - Lords decides if he is persuaded (lord POV) Non-RC Version
#agot_btw_struggle_nightswatch.02008 - Envoy prepares to return to the wall Non-RC Version
#agot_btw_struggle_nightswatch.02009 - Envoy learns of the ruler second decision Non-RC Version
#agot_btw_struggle_nightswatch.02010 - Envoy returns to the wall Non-RC Version
#agot_btw_struggle_nightswatch.02011 - Ruler violated the NW guest right - World event
#
###			   ###
#Wildlings Events#
###			   ###
#
####


#Non-Wildling/Not Winter holds BTW county, initiate monke mode >:)
agot_btw_struggle_maintenance.0001 = {
	hidden = yes
	type = character_event

	trigger = {
		any_realm_county = {
			NAND = {
				has_county_modifier = btw_province_devastation
				county_control >= 50
			}
		}
		NOR = {
			culture = {
				agot_is_wildling_culture = yes
			}
		}
		any_county_in_region = {
			region = world_westeros_beyond_the_wall
			count = all
			culture = {
				agot_is_wildling_culture = yes
			}
		}
	}

	#monke mode activation >:)
	immediate = {
		every_county_in_region = {
			region = world_westeros_beyond_the_wall
			limit = {
				holder = {
					culture = {
						agot_is_wildling_culture = no
					}
				}
			}
			add_county_modifier = {
				modifier = btw_wildlings_resistance
				years = 10000
			}
		}
	}
}

#Wildling/Winter holds BTW county / 50% autority mark achived, monke mode disengaged ;c
agot_btw_struggle_maintenance.0002 = {
	hidden = yes
	type = character_event

	trigger = {
		culture = {
			agot_is_wildling_culture = yes
		}
		any_realm_county = {
			AND = {
				has_county_modifier = btw_wildlings_resistance
				OR = {
					holder = {
						culture = {
							agot_is_wildling_culture = yes
						}
					}
					county_control >= 50
				}
			}
		}
		any_county_in_region = {
			region = world_westeros_beyond_the_wall
			count = all
			culture = {
				agot_is_wildling_culture = yes
			}
		}
	}

	#monke mode disengaged ;c
	immediate = {
		every_realm_county = {
			limit = {
				culture = {
					agot_is_wildling_culture = yes
				}
				holder = {
					culture = {
						agot_is_wildling_culture = yes
					}
				}
				has_county_modifier = btw_wildlings_resistance
			}
			remove_county_modifier = btw_wildlings_resistance
		}
	}
}

#Wildling called neighbours to help fight the interlopers (called from character interaction)
agot_btw_struggle_maintenance.0003 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0003.t  # FireFighter451: I don't think letter events use title.
	opening = {
		desc = agot_btw_struggle_maintenance.0003.opening
	}
	desc = agot_btw_struggle_maintenance.0003.desc

	sender = {
		character = scope:wildling_caller
		animation = worry
	}

	option = { #I will join in a united fight against the kneelers
		name = agot_btw_struggle_maintenance.0003.a
		save_scope_as = wildling_ally
		scope:wildling_caller = {
			every_character_war = {
				limit = {
					scope:wildling_caller = {
						is_at_war_as_defender = yes
					}
					primary_defender = scope:wildling_caller
					primary_attacker = {
						NOT = {
							any_character_struggle = {
								involvement = involved
							}
						}
					}
				}
				add_defender = scope:wildling_ally
			}
			trigger_event = { id = agot_btw_struggle_maintenance.0004 days = { 1 5 } }
		}
		ai_chance = {
			base = 1
			modifier = {
				add = 10
				culture = scope:wildling_caller.culture
			}
			modifier = {
				add = 15
				opinion = {
					target = scope:wildling_caller
					value >= 10
				}
			}
			modifier = {
				add = 5
				opinion = {
					target = scope:wildling_caller
					value >= 20
				}
			}
			modifier = {
				add = 5
				opinion = {
					target = scope:wildling_caller
					value >= 30
				}
			}
			modifier = {
				add = 20
				any_spouse = {
					dynasty = scope:wildling_caller.dynasty
				}
			}
			modifier = {
				add = -1000
				existing_feud_against_target_trigger = { TARGET = scope:wildling_ally }
			}
			modifier = {
				add = 1000
				has_trait = just
			}
			modifier = {
				add = -100
				has_relation_rival = scope:wildling_ally
			}
			modifier = {
				add = 100
				OR = {
					has_relation_best_friend = scope:wildling_ally
					has_relation_friend = scope:wildling_ally
					has_relation_lover = scope:wildling_ally
					has_relation_soulmate = scope:wildling_ally
				}
			}
			modifier = {
				add = 100
				ai_has_warlike_personality = yes
			}
			ai_value_modifier = {
				ai_greed = 0.2
				ai_rationality = 10
				ai_boldness = 0.7
				ai_honor = 10
				ai_zeal = 1
				ai_compassion = 10
			}
		}
	}
	option = { #i will join.... for a "gift"
		name = agot_btw_struggle_maintenance.0003.b
		save_scope_as = wildling_greedy_ally
		scope:wildling_caller = {
			trigger_event = { id = agot_btw_struggle_maintenance.0005 days = { 1 5 } }
		}
		ai_chance = {
			base = 1
			modifier = {
				add = 10
				culture = scope:wildling_caller.culture
			}
			modifier = {
				add = -15
				opinion = {
					target = scope:wildling_caller
					value >= 10
				}
			}
			modifier = {
				add = -5
				opinion = {
					target = scope:wildling_caller
					value >= 20
				}
			}
			modifier = {
				add = -5
				opinion = {
					target = scope:wildling_caller
					value >= 30
				}
			}
			modifier = {
				add = -20
				any_spouse = {
					dynasty = scope:wildling_caller.dynasty
				}
			}
			modifier = {
				add = -1000
				existing_feud_against_target_trigger = { TARGET = scope:wildling_ally }
			}
			modifier = {
				add = -100
				has_relation_rival = scope:wildling_ally
			}
			modifier = {
				add = -100
				OR = {
					has_relation_best_friend = scope:wildling_ally
					has_relation_friend = scope:wildling_ally
					has_relation_lover = scope:wildling_ally
					has_relation_soulmate = scope:wildling_ally
				}
			}
			modifier = {
				add = 50
				has_trait = greedy
			}
			modifier = {
				add = 10
				has_trait = cynical
			}
			modifier = {
				add = 15
				has_trait = fickle
			}
			modifier = {
				add = 25
				has_trait = deceitful
			}
			modifier = {
				add = 10
				has_trait = callous
			}
			modifier = {
				add = -1000
				has_trait = just
			}
			modifier = {
				add = 5
				ai_has_warlike_personality = yes
			}
			ai_value_modifier = {
				ai_greed = 10
				ai_rationality = 5
				ai_boldness = 0.4
				ai_honor = -15
				ai_zeal = 1
				ai_compassion = -5
			}
		}
	}
	option = { #no get rekt scrub, l + ratio + you inbred + you ded
		name = agot_btw_struggle_maintenance.0003.c
		save_scope_as = wildling_war_denier #>:)
		scope:wildling_caller = {
			trigger_event = { id = agot_btw_struggle_maintenance.0006 days = { 1 5 } }
		}

		ai_chance = {
			base = 1
			modifier = {
				add = 10
				culture = scope:wildling_caller.culture
			}
			modifier = {
				add = -1000
				has_trait = just
			}
			modifier = {
				add = -15
				opinion = {
					target = scope:wildling_caller
					value >= 10
				}
			}
			modifier = {
				add = -5
				opinion = {
					target = scope:wildling_caller
					value >= 20
				}
			}
			modifier = {
				add = -5
				opinion = {
					target = scope:wildling_caller
					value >= 30
				}
			}
			modifier = {
				add = -20
				any_spouse = {
					dynasty = scope:wildling_caller.dynasty
				}
			}
			modifier = {
				add = -1000
				existing_feud_against_target_trigger = { TARGET = scope:wildling_ally }
			}
			modifier = {
				add = -100
				has_relation_rival = scope:wildling_ally
			}
			modifier = {
				add = -100
				OR = {
					has_relation_best_friend = scope:wildling_ally
					has_relation_friend = scope:wildling_ally
					has_relation_lover = scope:wildling_ally
					has_relation_soulmate = scope:wildling_ally
				}
			}
			modifier = {
				add = 100
				has_trait = greedy
			}
			modifier = {
				add = 100
				has_trait = craven
			}
			modifier = {
				add = 100
				OR = {
					has_trait = lunatic_1
					has_trait = lunatic_genetic
				}
			}
			modifier = {
				add = -100
				has_trait = intellect_good_3
			}
			modifier = {
				add = -50
				has_trait = intellect_good_2
			}
			modifier = {
				add = -25
				has_trait = intellect_good_1
			}
			modifier = {
				add = 100
				has_trait = intellect_bad_3
			}
			modifier = {
				add = 50
				has_trait = intellect_bad_2
			}
			modifier = {
				add = 25
				has_trait = intellect_bad_1
			}
			ai_value_modifier = {
				ai_greed = 1
				ai_rationality = -50
				ai_boldness = -50
				ai_honor = -100
				ai_zeal = -2
				ai_compassion = -50
			}
		}
	}
}

#wildling ruler accepted CTA, noice
agot_btw_struggle_maintenance.0004 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0004.t
	opening = {
		desc = agot_btw_struggle_maintenance.0004.opening
	}
	desc = agot_btw_struggle_maintenance.0004.desc

	sender = {
		character = scope:wildling_ally
		animation = war_defender
	}

	#nice
	option = {
		name = agot_btw_struggle_maintenance.0004.a
		root = {
			add_opinion = {
				target = scope:wildling_ally
				modifier = grateful_opinion
				opinion = 30
			}
		}
	}
}

#wildling ruler accepted CTA, for an price. Greedy bastard
agot_btw_struggle_maintenance.0005 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0005.t
	opening = {
		desc = agot_btw_struggle_maintenance.0005.opening
	}
	desc = agot_btw_struggle_maintenance.0005.desc

	sender = {
		character = scope:wildling_greedy_ally
		animation = personality_greedy
	}

	#accept his/hers 'request'
	option = {
		name = agot_btw_struggle_maintenance.0005.a
		root = {
			add_opinion = {
				target = scope:wildling_greedy_ally
				modifier = insulted_opinion
			}
			pay_long_term_gold = {
				target = scope:wildling_greedy_ally
				gold = 100 #AGOT TODO SCALE BASED ON THE TIER, TURN INTO SCRIPT VALUE
			}
		}
		every_character_war = {
			limit = {
				root = {
					is_at_war_as_defender = yes
				}
				primary_defender = root
				primary_attacker = {
					NOT = {
						any_character_struggle = {
							involvement = involved
						}
					}
				}
			}
			add_defender = scope:wildling_greedy_ally
		}
	}
	#propose one of your family members as a price of joining
	option = {
		name = agot_btw_struggle_maintenance.0005.b
		trigger = {
			exists = this.house
			this.house = {
				any_house_member = {
					NOR = {
						is_married = yes
						is_ruler = yes
					}
				}
			}
		}

		this.house = {
			random_house_member = {
				limit = {
					NOR = {
						is_married = yes
						is_ruler = yes
					}
				}
				save_scope_as = wildling_potential_house_hostage
			}
		}
		scope:wildling_greedy_ally = {
			trigger_event = {
				id = agot_btw_struggle_maintenance.0007
				days = {3 5}
			}
		}
	}
	#Refuse ruler request
	option = {
		name = agot_btw_struggle_maintenance.0005.c
		root = {
			progress_towards_rival_effect = {
				CHARACTER = scope:wildling_greedy_ally
				REASON = rival_troublesome_warrior #change to refusing to join in the wildling war
				OPINION = -40
			}
		}
	}
}

#wildling decided to ignore your call... :/
agot_btw_struggle_maintenance.0006 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0006.t
	opening = {
		desc = agot_btw_struggle_maintenance.0006.opening
	}
	desc = agot_btw_struggle_maintenance.0006.desc

	sender = {
		character = scope:wildling_war_denier
		animation = dismissal
	}

	option = {
		name = agot_btw_struggle_maintenance.0006.a

		root = {
			progress_towards_rival_effect = {
				CHARACTER = scope:wildling_war_denier
				REASON = rival_troublesome_warrior #change to refusing to join in the wildling war
				OPINION = -70
			}
		}
	}
}

#wildling caller proposed one of his family members as payment to join
agot_btw_struggle_maintenance.0007 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0007.t
	opening = {
		desc = agot_btw_struggle_maintenance.0007.opening
	}
	desc = agot_btw_struggle_maintenance.0007.desc


	sender = {
		character = scope:wildling_caller
		animation = disapproval
	}

	option = { #accept
		name = agot_btw_struggle_maintenance.0007.a
		imprison = {
			target = scope:wildling_potential_house_hostage
			type = house_arrest
		}
		every_character_war = {
			limit = {
				scope:wildling_caller = {
					is_at_war_as_defender = yes
				}
				primary_defender = scope:wildling_caller
				primary_attacker = {
					NOT = {
						any_character_struggle = {
							involvement = involved
						}
					}
				}
			}
			add_defender = root
		}
		scope:wildling_caller = {
			trigger_event = {
				id = agot_btw_struggle_maintenance.0008
				days = {3 5}
			}
		}
	}

	option = { #lmao no
		name = agot_btw_struggle_maintenance.0007.b

		scope:wildling_caller = {
			trigger_event = {
				id = agot_btw_struggle_maintenance.0009
				days = {3 5}
			}
		}
	}
}

#Wildling caller learns of greedy ally joining
agot_btw_struggle_maintenance.0008 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0008.t
	opening = {
		desc = agot_btw_struggle_maintenance.0008.opening
	}
	desc = agot_btw_struggle_maintenance.0008.desc


	sender = {
		character = scope:wildling_greedy_ally
		animation = war_defender
	}


	option = { #good
		name = agot_btw_struggle_maintenance.0008.a
	}
}

#Wildling caller learns of greedy ally rejecting offer ;c
agot_btw_struggle_maintenance.0009 = {
	type = letter_event

	# title = agot_btw_struggle_maintenance.0009.t
	opening = {
		desc = agot_btw_struggle_maintenance.0009.opening
	}
	desc = agot_btw_struggle_maintenance.0009.desc


	sender = {
		character = scope:wildling_greedy_ally
		animation = disapproval
	}

	option = { #you shall pay for that
		name = agot_btw_struggle_maintenance.0009.a
		progress_towards_rival_effect = {
			CHARACTER = scope:wildling_greedy_ally
			REASON = rival_troublesome_warrior #change to refusing to join in the wildling war
			OPINION = -40
		}
	}
}

# NW Royal Court Disabled
# NW Petition Chain Start Event - Royal Court DLC owners
# agot_btw_struggle_nightswatch.01 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01.t
# 	desc = agot_btw_struggle_nightswatch.01.desc
# 	theme = realm
# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	immediate = {
# 		root = {
# 			cp:councillor_chancellor = {
# 				save_scope_as = nw_petition_envoy
# 			}
# 		}
# 	}

# 	#Request Men
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01.a
# 		trigger = {
# 			scope:nw_petition_target = {
# 				any_prisoner = { count >= 1 }
# 			}
# 		}
# 		set_variable = {
# 			name = nw_petition_type
# 			value = flag:Men
# 		}
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01000
# 			delayed = yes
# 		}
# 	}

# 	#Request Supplies
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01.b
# 		set_variable = {
# 			name = nw_petition_type
# 			value = flag:Supplies
# 		}
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01000
# 			delayed = yes
# 		}
# 	}

# 	#Request Both
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01.c
# 		trigger = {
# 			scope:nw_petition_target = {
# 				any_prisoner = { count >= 1 }
# 			}
# 		}
# 		set_variable = {
# 			name = nw_petition_type
# 			value = flag:Both
# 		}
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01000
# 			delayed = yes
# 		}
# 	}

# 	#Eee maybe it is not that good idea
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01.d
# 		clear_saved_scope = nw_petition_envoy
# 		clear_saved_scope = nw_petition_target
# 	}
# }

# NW Petition Chain Start Event - Non Royal Court DLC owners
agot_btw_struggle_nightswatch.02 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01.t
	desc = agot_btw_struggle_nightswatch.01.desc
	theme = realm

	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		animation = chancellor
	}

	immediate = {
		root = {
			cp:councillor_chancellor = {
				save_scope_as = nw_petition_envoy
			}
		}
	}

	#Request Men
	option = {
		name = agot_btw_struggle_nightswatch.01.a
		trigger = {
			scope:nw_petition_target = {
				any_prisoner = { count >= 1 }
			}
		}
		set_variable = {
			name = nw_petition_type
			value = flag:Men
		}
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02000
			delayed = yes
		}
	}

	#Request Supplies
	option = {
		name = agot_btw_struggle_nightswatch.01.b
		set_variable = {
			name = nw_petition_type
			value = flag:Supplies
		}
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02000
			delayed = yes
		}
	}

	#Request Both
	option = {
		name = agot_btw_struggle_nightswatch.01.c
		trigger = {
			scope:nw_petition_target = {
				any_prisoner = { count >= 1 }
			}
		}
		set_variable = {
			name = nw_petition_type
			value = flag:Both
		}
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02000
			delayed = yes
		}
	}

	#Eee maybe it is not that good idea
	option = {
		name = agot_btw_struggle_nightswatch.01.d
		clear_saved_scope = nw_petition_envoy
		clear_saved_scope = nw_petition_target
	}
}

#NW Petition Journey Random Event 1 - Hidden Tresure
agot_btw_struggle_nightswatch.0100 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0100.t
	desc = agot_btw_struggle_nightswatch.0100.desc
	theme = realm

	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		animation = personality_bold
	}

	immediate = {
		if = {
			limit = {
				scope:nw_petition_target = {
					primary_title = {
						tier > 2
					}
				}
			}
			scope:nw_petition_target = {
				random_vassal = {
					save_scope_as = local_lord
				}
			}
		}

		if = {
			limit = {
				NOT = { exists = scope:local_lord }
			}
			scope:nw_petition_target = { save_scope_as = local_lord }
		}
	}

	#Take the Tresure
	option = {
		name = agot_btw_struggle_nightswatch.0100.a
		add_gold = massive_gold_value
	}

	#Give to local Ruler
	option = {
		name = agot_btw_struggle_nightswatch.0100.b
		scope:local_lord = {
			add_gold = massive_gold_value
		}
	}

	#Give to local smallfolk
	option = {
		name = agot_btw_struggle_nightswatch.0100.c

		scope:local_lord.capital_province.county = {
			add_county_modifier = {
				modifier = county_increased_opinion_modifier
				years = 5
			}
		}
	}
}

#NW Petition Journey Random Event 2 - Volunteers
agot_btw_struggle_nightswatch.0101 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0101.t
	desc = agot_btw_struggle_nightswatch.0101.desc
	theme = realm

	#Take Them
	option = {
		name = agot_btw_struggle_nightswatch.0101.a
		set_variable = {
			name = nw_petition_man_taken_size
			value = nw_random_event_troop_size_script_var
		}
	}

	#Reject Them
	option = {
		name = agot_btw_struggle_nightswatch.0101.b
	}
}

#NW Petition Journey Random Event 3 - Local lord offer Supplies
agot_btw_struggle_nightswatch.0102 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0102.t
	desc = agot_btw_struggle_nightswatch.0102.desc

	theme = realm

	left_portrait = {
		character = scope:nw_petition_envoy
		animation = personality_bold
	}

	right_portrait = {
		character = scope:local_lord
		animation = personality_honorable
	}

	trigger = {
		scope:nw_petition_target = {
			any_vassal = {
				exists = this
			}
		}
	}

	immediate = {
		scope:nw_petition_target = {
			random_vassal = {
				save_scope_as = local_lord
			}
		}
	}

	#Take Them
	option = {
		name = agot_btw_struggle_nightswatch.0102.a
		set_variable = {
			name = nw_petition_supplies_amount
			value = nw_random_event_supplies_size_script_var
		}
	}

	#Reject Them
	option = {
		name = agot_btw_struggle_nightswatch.0102.b
	}
}

#NW Petition Journey Random Event 4 - Angry Peasant Mob chases down envoy
agot_btw_struggle_nightswatch.0103 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0103.t
	desc = agot_btw_struggle_nightswatch.0103.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:peasant_leader }
		character = scope:peasant_leader
		animation = aggressive_spear
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = fear
	}

	immediate = {
		create_character = {
			location = scope:nw_petition_target.capital_province
			template = AGOT_peasant_leader_martial_character
			save_scope_as = peasant_leader
		}
	}

	#Attack the leader
	option = {
		name = agot_btw_struggle_nightswatch.0103.a
		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:nw_petition_envoy
			SC_ATTACKER = scope:nw_petition_envoy
			SC_DEFENDER = scope:peasant_leader
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}

	#Try to Flee
	option = {
		name = agot_btw_struggle_nightswatch.0103.b
		random_list = {
			20 = { #you flee from peaseants
				custom_tooltip = {
					text = nw_petition_rand_event_4_flee_succ
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0113
						delayed = yes
					}
				}
				modifier = {
					add = scope:nw_petition_envoy.intrigue
				}
				modifier = {
					add = scope:nw_petition_envoy.prowess
				}
			}
			30 = { #you are caught
				custom_tooltip = {
					text = nw_petition_rand_event_4_flee_fail
					scope:peasant_leader = {
						save_scope_as = nw_petition_envoy_killer
					}
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0114
						delayed = yes
					}
				}
			}
		}
	}
}

#NW Petition Journey Random Event 5 - Envoy mistaken for Bandit
agot_btw_struggle_nightswatch.0104 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0104.t
	desc = agot_btw_struggle_nightswatch.0104.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:peasant_leader }
		character = scope:peasant_leader
		animation = aggressive_sword
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = anger
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_hedgeknight_character
			trait = knight
			gender = male
			dynasty = generate
			save_scope_as = idiotic_knight_whomst_think_BB_is_bandit
		}
	}

	#Try to Reason
	option = {
		name = agot_btw_struggle_nightswatch.0104.a
		trigger = {
			scope:nw_petition_envoy = {
				learning > 10
			}
		}
		add_internal_flag = special
		scope:nw_petition_envoy = {
			duel = {
				skill = learning
				target = scope:nw_petition_target
				# You win: some minor prestige, more opinion.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					custom_tooltip = {
						text = nw_petition_rand_event_4_succ
						root = {
							trigger_event = {
								id = agot_btw_struggle_nightswatch.0115
								delayed = yes
							}
						}
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = {
						text = nw_petition_rand_event_4_succ
						root = {
							trigger_event = {
								id = agot_btw_struggle_nightswatch.0116
								delayed = yes
							}
						}
					}
				}
			}
		}
	}

	#Try to Fight
	option = {
		name = agot_btw_struggle_nightswatch.0104.b

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:idiotic_knight_whomst_think_BB_is_bandit
			SC_ATTACKER = scope:idiotic_knight_whomst_think_BB_is_bandit
			SC_DEFENDER = scope:nw_petition_envoy
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}

	#Persuade them
	option = {
		name = agot_btw_struggle_nightswatch.0104.c
		trigger = {
			scope:nw_petition_envoy = {
				diplomacy > 10
			}
		}
		add_internal_flag = special
		scope:nw_petition_envoy = {
			duel = {
				skill = diplomacy
				target = scope:idiotic_knight_whomst_think_BB_is_bandit
				# You win: some minor prestige, more opinion.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					custom_tooltip = {
						text = nw_petition_rand_event_4_succ
						root = {
							trigger_event = {
								id = agot_btw_struggle_nightswatch.0115
								delayed = yes
							}
						}
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = {
						scope:idiotic_knight_whomst_think_BB_is_bandit = {
							save_scope_as = nw_petition_envoy_killer
						}
						text = nw_petition_rand_event_4_fail
						root = {
							trigger_event = {
								id = agot_btw_struggle_nightswatch.0116
								delayed = yes
							}
						}
					}
				}
			}
		}
	}
}

#NW Petition Journey Random Event 6 - Drunk Envoy
agot_btw_struggle_nightswatch.0105 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0105.t
	desc = agot_btw_struggle_nightswatch.0105.desc
	theme = realm
	option = {
		name = agot_btw_struggle_nightswatch.0105.a
	}

	right_portrait = {
		trigger = { exists = title:k_the_wall.holder }
		character = title:k_the_wall.holder
		animation = disapproval
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = drink
	}
}

#NW Petition Journey Random Event 7 - Envoy insults local knight
agot_btw_struggle_nightswatch.0106 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0106.t
	desc = agot_btw_struggle_nightswatch.0106.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:local_knight }
		character = scope:local_knight
		animation = anger
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = personality_irrational
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_hedgeknight_character
			trait = knight
			gender = male
			dynasty = generate
			save_scope_as = local_knight
		}
	}

	#Pay recompensation
	option = {
		name = agot_btw_struggle_nightswatch.0106.a
		pay_long_term_gold = {
			target = scope:local_knight
			gold = 100 #Make scalable
		}
	}

	#Dont Pay Recompensation
	option = {
		name = agot_btw_struggle_nightswatch.0106.b
		scope:local_knight = {
			add_opinion = {
				target = root
				modifier = angry_opinion
				opinion = -25
			}
		}
	}

	#Flatter them with the Words
	option = {
		name = agot_btw_struggle_nightswatch.0106.c
		trigger = {
			root = {
				learning > 10
			}
		}
		add_internal_flag = special
	}

	after = {
		scope:local_knight = {
			death = {
				death_reason = death_vanished
			}
		}
	}
}

#NW Petition Journey Random Event 8 - Tavern Brawl
agot_btw_struggle_nightswatch.0107 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0107.t
	desc = agot_btw_struggle_nightswatch.0107.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:drunk_brawler }
		character = scope:drunk_brawler
		animation = anger
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = drink
	}

	immediate = {
		random_list = {
			33 = { #dirty fooking peasant
				create_character = {
					location = root.capital_province
					template = generic_peasant_character
					save_scope_as = drunk_brawler
				}
			}
			33 = { #warrior
				create_character = {
					location = root.capital_province
					template = new_warrior_character
					culture = scope:nw_petition_target.culture
					faith = scope:nw_petition_target.faith
					gender_female_chance = 50
					save_scope_as = drunk_brawler
				}
			}
			33 = { #noble
				create_character = {
					location = root.capital_province
					template = agot_hedgeknight_character
					trait = knight
					gender = male
					dynasty = generate
					save_scope_as = drunk_brawler
				}
			}
		}
	}

	#Fight
	option = {
		name = agot_btw_struggle_nightswatch.0107.a

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:drunk_brawler
			SC_ATTACKER = scope:drunk_brawler
			SC_DEFENDER = scope:nw_petition_envoy
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}
}

#NW Petition Journey Random Event 9 - Bandits Attack
agot_btw_struggle_nightswatch.0108 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0108.t
	desc = agot_btw_struggle_nightswatch.0108.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:vile_bandit }
		character = scope:vile_bandit
		animation = aggressive_axe
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = aggressive_sword
	}

	immediate = {
		create_character = {
			location = root.capital_province
			template = new_warrior_character
			gender_female_chance = 50
			culture = scope:nw_petition_target.culture
			faith = scope:nw_petition_target.faith
			save_scope_as = vile_bandit #VILE FOOKING BANDIT REEEEEEE
		}
	}

	#Fight Bandit
	option = {
		name = agot_btw_struggle_nightswatch.0108.a

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:vile_bandit
			SC_ATTACKER = scope:vile_bandit
			SC_DEFENDER = scope:nw_petition_envoy
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}

	#Pay him off
	option = {
		name = agot_btw_struggle_nightswatch.0108.b
	}

	#Try to flee
	option = {
		name = agot_btw_struggle_nightswatch.0108.c
		random_list = {
			50 = { #you flee from bandit
				custom_tooltip = {
					text = nw_petition_rand_event_9_flee_succ
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0113
						delayed = yes
					}
				}
			}
			50 = { #you are caught
				scope:vile_bandit = {
					save_scope_as = nw_petition_envoy_killer
				}
				custom_tooltip = {
					text = nw_petition_rand_event_9_flee_fail
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0114
						delayed = yes
					}
				}
			}
		}
	}
}

#NW Petition Journey Random Event 10 - Local Animal attacks envoy
agot_btw_struggle_nightswatch.0109 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0109.t
	desc = agot_btw_struggle_nightswatch.0109.desc
	theme = realm
	override_background = { reference = ep2_hunt_snowy_forest }

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = fear
	}

	#try to fight
	option = {
		name = agot_btw_struggle_nightswatch.0109.a
		random_list = {
			33 = { #defeat the vile beast
				custom_tooltip = {
					text = nw_petition_rand_event_10_win
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0117
						delayed = yes
					}
				}
			}
			33 = { #you are wounded
				custom_tooltip = {
					text = nw_petition_rand_event_10_wounded
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0118
						delayed = yes
					}
				}
			}
			33 = { #you die lol
				custom_tooltip = {
					text = nw_petition_rand_event_10_defeat
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0119
						delayed = yes
					}
				}
			}
		}
	}

	#try to flee
	option = {
		name = agot_btw_struggle_nightswatch.0109.b
		random_list = {
			55 = { #you flee
				custom_tooltip = {
					text = nw_petition_rand_event_9_flee_succ
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0120
						delayed = yes
					}
				}
			}
			55 = { #you die lol
				custom_tooltip = {
					text = nw_petition_rand_event_9_flee_fail
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0119
						delayed = yes
					}
				}
			}
		}
	}
}

#NW Petition Journey Random Event 4 - Maintnence event 1
agot_btw_struggle_nightswatch.0110 = {
	hidden = yes

	immediate = {
		title:k_the_wall.holder = {
			trigger_event = agot_btw_struggle_nightswatch.0111
		}
	}
}

#AGOT TODO FINISH ME ONCE ALL FIGHT EVENTS ARE DONE
#NW Petition Journey Random Events Duel Ended show Results
agot_btw_struggle_nightswatch.0111 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0111.t
	desc = agot_btw_struggle_nightswatch.0111.desc
	theme = realm

	left_portrait = {
		character = scope:sc_victor
		animation = celebrate_sword
	}

	lower_right_portrait = {
		character = scope:sc_loser
	}

	option = {
		name = agot_btw_struggle_nightswatch.0111.a
		trigger = {
			scope:sc_victor = {
				this = scope:nw_petition_envoy
			}
		}
	}

	option = {
		name = agot_btw_struggle_nightswatch.0111.b
		trigger = {
			scope:sc_victor = {
				NOT = { this = scope:nw_petition_envoy }
			}
		}
		scope:nw_petition_envoy = {
			death = {
				killer = scope:sc_victor
				death_reason = death_execution
			}
		}
		agot_nw_in_petition_envoy_died = yes
	}
}

#NW Petition Journey Random Event Duel Invalidated ;c
agot_btw_struggle_nightswatch.0112 = {
	hidden = yes

	immediate = {
		# Everyone puts their shirts back on.
		single_combat_clean_shirtlessness_effect = {
			ATTACKER = scope:actor
			DEFENDER = scope:recipient
		}
	}
}

#NW Petition Journey Random Event 4,9 - Envoy evades
agot_btw_struggle_nightswatch.0113 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0113.t
	desc = agot_btw_struggle_nightswatch.0113.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = personality_bold
	}

	#Onwards to destination!
	option = {
		name = agot_btw_struggle_nightswatch.0113.a
	}
}

#NW Petition Journey Random Event 4,9 - Envoy is found
agot_btw_struggle_nightswatch.0114 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0114.t
	desc = agot_btw_struggle_nightswatch.0114.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:nw_petition_envoy_killer }
		character = scope:nw_petition_envoy_killer
		animation = aggressive_sword
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = fear
	}

	#Accept you fate
	option = {
		name = agot_btw_struggle_nightswatch.0113.a

		scope:nw_petition_envoy = {
			death = {
				killer = scope:nw_petition_envoy_killer
				death_reason = death_execution
			}
		}
		hidden_effect = {
			scope:nw_petition_envoy_killer = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		agot_nw_in_petition_envoy_died = yes
	}

	#Try to resist
	option = {
		name = agot_btw_struggle_nightswatch.0114.b

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:nw_petition_envoy
			SC_ATTACKER = scope:nw_petition_envoy
			SC_DEFENDER = scope:nw_petition_envoy_killer
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}

}

#NW Petition Journey Random Event 5 - Envoy shows he is not bandit
agot_btw_struggle_nightswatch.0115 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0115.t
	desc = agot_btw_struggle_nightswatch.0115.desc
	theme = realm


	right_portrait = {
		trigger = { exists = scope:idiotic_knight_whomst_think_BB_is_bandit }
		character = scope:idiotic_knight_whomst_think_BB_is_bandit
		animation = disbelief
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = personality_rational
	}

	#Moving on
	option = {
		name = agot_btw_struggle_nightswatch.0115.a
	}
}

#NW Petition Journey Random Event 5 - Knight still thinks BB is bandit
agot_btw_struggle_nightswatch.0116 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0116.t
	desc = agot_btw_struggle_nightswatch.0116.desc
	theme = realm

	right_portrait = {
		trigger = { exists = scope:idiotic_knight_whomst_think_BB_is_bandit }
		character = scope:idiotic_knight_whomst_think_BB_is_bandit
		animation = dismissal
	}

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = disbelief
	}

	#Accept you fate
	option = {
		name = agot_btw_struggle_nightswatch.0114.a

		scope:nw_petition_envoy = {
			death = {
				killer = scope:nw_petition_envoy_killer
				death_reason = death_execution
			}
		}
		hidden_effect = {
			scope:nw_petition_envoy_killer = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		agot_nw_in_petition_envoy_died = yes
	}

	#Try to resist
	option = {
		name = agot_btw_struggle_nightswatch.0114.b

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:nw_petition_envoy
			SC_ATTACKER = scope:nw_petition_envoy
			SC_DEFENDER = scope:nw_petition_envoy_killer
			FATALITY = always
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = agot_btw_struggle_nightswatch.0110
			INVALIDATION_EVENT = agot_btw_struggle_nightswatch.0112
		}
	}
}

#NW Petition Journey Random Event 10 - You Defeat the beast
agot_btw_struggle_nightswatch.0117 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0117.t
	desc = agot_btw_struggle_nightswatch.0117.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = celebrate_sword
	}

	#Onwards
	option = {
		name = agot_btw_struggle_nightswatch.0117.a
		scope:nw_petition_envoy = {
			add_prestige = minor_prestige_gain
		}
	}
}

#NW Petition Journey Random Event 10 - You Defeat the beast but are left wounded
agot_btw_struggle_nightswatch.0118 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0118.t
	desc = agot_btw_struggle_nightswatch.0118.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = worry
	}

	#Onwards
	option = {
		name = agot_btw_struggle_nightswatch.0114.b
		scope:nw_petition_envoy = {
			add_trait = wounded_1
			add_prestige = medium_prestige_gain
		}
	}
}

#NW Petition Journey Random Event 10 - You Die lmao
agot_btw_struggle_nightswatch.0119 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0119.t
	desc = agot_btw_struggle_nightswatch.0119.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = worry
	}

	#You ded lol
	option = {
		name = agot_btw_struggle_nightswatch.0119.a
		scope:nw_petition_envoy = {
			death = {
				death_reason = death_head_ripped_off
			}
		}
		#AGOT TODO ADD CLEAR EFFECT
		agot_nw_in_petition_envoy_died = yes
	}
}

#NW Petition Journey Random Event 10 - You are able to flee from the beast
agot_btw_struggle_nightswatch.0120 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0120.t
	desc = agot_btw_struggle_nightswatch.0120.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = celebrate_sword
	}

	#Onwards
	option = {
		name = agot_btw_struggle_nightswatch.0120.a
		scope:nw_petition_envoy = {
			add_prestige = minor_prestige_loss
		}
	}
}

#NW Post Petition Random event 1 - Lord's Family member want to join
agot_btw_struggle_nightswatch.0200 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0200.t
	desc = agot_btw_struggle_nightswatch.0200.desc
	theme = realm
	left_portrait = scope:nw_petition_200_lords_family_member
	right_portrait = scope:nw_petition_envoy

	#Accept
	option = {
		name = agot_btw_struggle_nightswatch.0200.a
		custom_tooltip = {
			text = nw_post_petition_rand_event_1_family_member_taken
			#set_variable = nw_petition_200_taken_lords_family_member Reenable it once you actually use it

			if = {
				limit = {
					is_female = yes
				}
				random = {
					chance = 50
					scope:nw_petition_200_lords_family_member = {
						save_scope_as = nw_petition_202_female_recruit
					}
					create_character = {
						location = root.capital_province
						template = generic_peasant_character
						gender = male
						dynasty = none
						save_scope_as = nw_petition_200_nw_recruit
					}
					trigger_event = {
						id = agot_btw_struggle_nightswatch.0201
						days = { 2 5 }
					}
				}
			}
		}
	}

	#Decline
	option = {
		name = agot_btw_struggle_nightswatch.0200.b
		custom_tooltip = {
			text = nw_post_petition_rand_event_1_family_member_refused

		}
	}
}


#NW Post Petition Random event 2 - One of recruits is secretly an Female
agot_btw_struggle_nightswatch.0201 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0201.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:nw_petition_200_lords_family_member = {
						this = scope:nw_petition_202_female_recruit
					}
				}
				desc = agot_btw_struggle_nightswatch.0201.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_200_lords_family_member = {
						NOT = { this = scope:nw_petition_202_female_recruit }
					}
				}
				desc = agot_btw_struggle_nightswatch.0201.desc.b
			}
			desc = NW_SOMETHING_BROKE
		}
	}
	theme = realm
	left_portrait = scope:nw_petition_202_female_recruit
	right_portrait = scope:nw_petition_envoy



	#Take Her
	option = {
		name = agot_btw_struggle_nightswatch.0201.a
		trigger = {
			always = no #AGOT TODO ONCE LAWS AND SUCH WILL BE ADDED REDO THIS
		}

		scope:nw_petition_202_female_recruit = {
			progress_towards_friend_effect = {
				REASON = friend_took_side_in_dispute
				CHARACTER = scope:nw_petition_envoy
				OPINION = 40
			}
		}
		if = {
			limit = {
				exists = scope:nw_petition_200_nw_recruit
			}
			scope:nw_petition_200_nw_recruit = {
				progress_towards_rival_effect = {
					REASON = rival_grave_insult
					CHARACTER = scope:nw_petition_envoy
					OPINION = -45
				}
			}
		}
	}

	#Order her to keep Disguise
	option = {
		name = agot_btw_struggle_nightswatch.0201.b

		scope:nw_petition_202_female_recruit = {
			progress_towards_friend_effect = {
				REASON = friend_took_side_in_dispute
				CHARACTER = scope:nw_petition_envoy
				OPINION = 20
			}
			set_variable = hidden_female # vaiable unused
		}
		if = {
			limit = {
				exists = scope:nw_petition_200_nw_recruit
			}
			scope:nw_petition_200_nw_recruit = {
				progress_towards_rival_effect = {
					REASON = rival_grave_insult
					CHARACTER = scope:nw_petition_envoy
					OPINION = -20
				}
			}
		}
	}

	#Order her to leave
	option = {
		name = agot_btw_struggle_nightswatch.0201.c

		scope:nw_petition_202_female_recruit = {
			progress_towards_rival_effect = {
				REASON = rival_grave_insult
				CHARACTER = scope:nw_petition_envoy
				OPINION = -20
			}
		}
		if = {
			limit = {
				exists = scope:nw_petition_200_nw_recruit
			}
			scope:nw_petition_200_nw_recruit = {
				progress_towards_friend_effect = {
					REASON = friend_took_side_in_dispute
					CHARACTER = scope:nw_petition_envoy
					OPINION = 20
				}
			}
		}
	}
}

#NW Post Petition Random event 3 - Recruit/s try to flee
agot_btw_struggle_nightswatch.0202 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0202.t
	desc = agot_btw_struggle_nightswatch.0202.desc
	theme = realm

	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = disapproval
	}

	#kill them
	option = {
		name = agot_btw_struggle_nightswatch.0202.a

		every_in_list = {
			list = nw_petition_202_deserters
			death = {
				killer = scope:nw_petition_envoy
				death_reason = death_execution
			}
		}
	}

	#Take them anyways
	option = {
		name = agot_btw_struggle_nightswatch.0202.b

	}
}

#NW Post Petition Random event 4 - local Knight wants to join
agot_btw_struggle_nightswatch.0203 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0203.t
	desc = agot_btw_struggle_nightswatch.0203.desc
	theme = realm
	left_portrait = scope:nw_petition_203_local_knight
	right_portrait = scope:nw_petition_envoy


	#Take Him
	option = {
		name = agot_btw_struggle_nightswatch.0203.a

		custom_tooltip = {
			text = nw_post_petition_rand_event_4_knight_taken
		#	set_variable = knight_taken # variable set but never used
		}
	}

	#Reject Him
	option = {
		name = agot_btw_struggle_nightswatch.0203.b

		custom_tooltip = {
			text = nw_post_petition_rand_event_4_knight_refused
			scope:nw_petition_203_local_knight = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}
}

#NW Post Petition Random event 5 - Blacksmith offers supplies
agot_btw_struggle_nightswatch.0204 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0204.t
	desc = agot_btw_struggle_nightswatch.0204.desc
	theme = realm

	right_portrait = {
		character = scope:nw_petition_envoy
		animation = happiness
	}

	left_portrait = {
		character = scope:nw_petition_envoy
		animation = personality_compassionate
	}

	#Take Them
	option = {
		name = agot_btw_struggle_nightswatch.0204.a

		custom_tooltip = {
			text = nw_post_petition_rand_event_5_gain_supp
			change_variable = {
				name = nw_petition_supplies_amount
				add = nw_random_event_supplies_size_script_var
			}
			scope:nw_petition_204_blacksmith = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

	#Refuse them
	option = {
		name = agot_btw_struggle_nightswatch.0204.b

	}
}

#NW Post Petition Random event 6 - Spoiled Supplies  # FireFighter451: How does this trigger??
agot_btw_struggle_nightswatch.0205 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0205.t
	desc = agot_btw_struggle_nightswatch.0205.desc
	theme = realm
	left_portrait = {
		trigger = { exists = scope:nw_petition_envoy }
		character = scope:nw_petition_envoy
		animation = worry
	}


	#Damn it!
	option = {
		name = agot_btw_struggle_nightswatch.0205.a

		custom_tooltip = {
			text = nw_post_petition_rand_event_6_lose_supp
			set_variable = nw_petition_205_bigger_loss
			change_variable = {
				name = nw_petition_supplies_amount
				subtract = nw_random_event_supplies_size_script_var
			}
		}
	}

	#use knowlege you have to limit loss
	option = {
		trigger = {
			scope:nw_petition_envoy = {
				learning > 7
			}
		}
		add_internal_flag = special
		name = agot_btw_struggle_nightswatch.0205.b
		custom_tooltip = {
			text = nw_post_petition_rand_event_6_small_lose_supp
			set_variable = nw_petition_205_smaller_loss
			change_variable = {
				name = nw_petition_supplies_amount
				subtract = nw_random_event_supplies_size_script_var
			}
		}
	}

	#use your skills to get more supplies
	option = {
		trigger = {
			scope:nw_petition_envoy = {
				diplomacy > 7
			}
		}
		add_internal_flag = special
		name = agot_btw_struggle_nightswatch.0205.c

		custom_tooltip = {
			text = nw_post_petition_rand_event_6_gain_supp
		}
	}

	#beg for more supplies
	option = {
		name = agot_btw_struggle_nightswatch.0205.d
		add_prestige = -150

		random_list = {
			50 = {
				custom_tooltip = {
					text = nw_post_petition_rand_event_6_lose_supp

					set_variable = nw_petition_205_bigger_loss
					change_variable = {
						name = nw_petition_supplies_amount
						subtract = nw_random_event_supplies_size_script_var
					}
				}
			}
			50 = {
				custom_tooltip = {
					text = nw_post_petition_rand_event_6_gain_supp #you dont lose any
				}
			}
		}
	}
}

#NW Post Petition Random event 7 - Supplies Thief
agot_btw_struggle_nightswatch.0206 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0206.t
	desc = agot_btw_struggle_nightswatch.0206.desc
	theme = realm

	left_portrait = scope:nw_petition_206_supplies_thief
	right_portrait = scope:nw_petition_envoy

	#Kill Her/Him
	option = {
		name = agot_btw_struggle_nightswatch.0206.a

		scope:nw_petition_206_supplies_thief = {
			death = {
				killer = scope:nw_petition_envoy
				death_reason = death_execution
			}
		}
	}

	#Take Him to the wall
	option = {
		trigger = {
			scope:nw_petition_206_supplies_thief = {
				is_female = no
			}
		}
		name = agot_btw_struggle_nightswatch.0206.b

		#He shall become a fine black brother
		custom_tooltip = {
			text = nw_post_petition_rand_event_7_wall
			#set_variable = nw_petition_206_taken_thief_wall Reenable when you start using it
		}
	}

	#Let the local lord deal with Her/Him
	option = {
		name = agot_btw_struggle_nightswatch.0206.c

		#local Lord will deal with him
		custom_tooltip = {
			text = nw_post_petition_rand_event_7_wall
			scope:nw_petition_target = {
				add_courtier = scope:nw_petition_206_supplies_thief
				imprison = {
					target = scope:nw_petition_206_supplies_thief
					type = dungeon
				}
			}
		}
	}
}

#NW Post Petition Random event 8 - You Got more supplies than you wanted  # FireFighter451: How does this trigger?
agot_btw_struggle_nightswatch.0207 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.0207.t
	desc = agot_btw_struggle_nightswatch.0207.desc
	theme = realm
	left_portrait = scope:nw_petition_target
	right_portrait = scope:nw_petition_envoy


	#Take them  # FireFighter451: Perhaps this should carry a risk of the spoiled supplies random event?
	option = {
		name = agot_btw_struggle_nightswatch.0207.a

		custom_tooltip = {
			text = nw_post_petition_rand_event_8_gain_supp

			change_variable = {
				name = nw_petition_supplies_amount
				add = nw_random_event_supplies_size_script_var
			}
		}
	}

	#Give them to the smallfolk
	option = {
		name = agot_btw_struggle_nightswatch.0207.b

		custom_tooltip = {
			text = nw_post_petition_rand_event_8_give_to_small_folk
			set_variable = nw_petition_207_smaller_loss
			change_variable = {
				name = nw_petition_supplies_amount
				subtract = nw_random_event_supplies_size_script_var
			}
			scope:nw_petition_target.capital_county = {
				add_county_modifier = {
					modifier = nw_petition_given_smallfolk_gold
					years = 10
				}
			}
		}
	}
}

#NW Post Petition Random event 1 - Maintance Event 1
agot_btw_struggle_nightswatch.0208 = {
	type = character_event
	hidden = yes

	trigger = {
		scope:nw_petition_target.house ?= {
			any_house_member = {
				age > 11
				is_married = no
				NOT = {
					is_landed = yes
				}
				NOT = { this = scope:nw_petition_target }
				NOT = { this = scope:nw_petition_target.primary_heir }
				NOT = { is_female = yes }
			}
		}
	}

	immediate = {
		scope:nw_petition_target.house ?= {
			random_house_member = {
				limit = {
					age > 11
					is_married = no
					NOT = {
						is_landed = yes
					}
					NOT = { this = scope:nw_petition_target }
					NOT = { this = scope:nw_petition_target.primary_heir }
					NOT = { is_female = yes }
				}
				save_scope_as = nw_petition_200_lords_family_member
			}
		}
		trigger_event = agot_btw_struggle_nightswatch.0200
	}
}

#NW Post Petition Random event 2 - Maintance Event 1
agot_btw_struggle_nightswatch.0209 = {
	type = character_event
	hidden = yes

	immediate = {
		random_list = {
			50 = {
				create_character = {
					location = root.capital_province
					template = new_warrior_character
					culture = scope:nw_petition_target.culture
					faith = scope:nw_petition_target.faith
					gender = female
					dynasty = none
					save_scope_as = nw_petition_202_female_recruit
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = new_warrior_character
					culture = scope:nw_petition_target.culture
					faith = scope:nw_petition_target.faith
					gender = female
					dynasty = generate
					save_scope_as = nw_petition_202_female_recruit
				}
			}
		}
		trigger_event = agot_btw_struggle_nightswatch.0201
	}
}

#NW Post Petition Random event 4 - Maintance Event 1
agot_btw_struggle_nightswatch.0210 = {
	type = character_event
	hidden = yes

	immediate = {
		create_character = {
			location = root.capital_province
			template = agot_hedgeknight_character
			trait = knight
			gender = male
			dynasty = generate
			save_scope_as = nw_petition_203_local_knight
		}
		trigger_event = agot_btw_struggle_nightswatch.0203
	}
}

#NW Post Petition Random event 7 - Maintance Event 1
agot_btw_struggle_nightswatch.0211 = {
	type = character_event
	hidden = yes

	immediate = {
		create_character = {
			location = root.capital_province
			template = generic_peasant_character
			dynasty = none
			save_scope_as = nw_petition_206_supplies_thief
		}
		trigger_event = agot_btw_struggle_nightswatch.0206
	}
}

#NW Post Petition Random event 5 - Maintance Event 1
agot_btw_struggle_nightswatch.0212 = {
	type = character_event
	hidden = yes

	immediate = {
		create_character = {
			location = root.capital_province
			template = generic_peasant_character
			dynasty = none
			save_scope_as = nw_petition_204_blacksmith
		}
		trigger_event = agot_btw_struggle_nightswatch.0204
	}
}

#NW Post Petition Random event 3 - Maintance Event 1
agot_btw_struggle_nightswatch.0213 = {
	type = character_event
	hidden = yes

	immediate = {
		while = {
			count = 3
			create_character = {
				location = root.capital_province
				template = generic_peasant_character
				dynasty = none
				after_creation = {
					add_to_list = nw_petition_202_deserters
				}
			}
		}
		trigger_event = agot_btw_struggle_nightswatch.0202
	}
}

# NW Royal Court Disabled
#Envoy starts his yourney RC Version
# agot_btw_struggle_nightswatch.01000 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01000.t
# 	desc = agot_btw_struggle_nightswatch.01000.desc
# 	theme = realm
# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	immediate = {
# 		root = {
# 			cp:councillor_chancellor = {
# 				save_scope_as = nw_petition_envoy
# 			}
# 		}

# 		#70 days from rhoynish dorne
# 		#65 days from stone dorne
# 		#60 days from reach proper / Dragonstone
# 		#55 days from stormlands / Reach part of crownlands / Stormlands part of crownlands
# 		#50 days from KL / Westerlands / Iron Islands
# 		#45 days from Vale
# 		#40 days from trident
# 		#30 days from North
# 		switch = {
# 			trigger = agot_btw_how_far_is_target_capital

# 			70 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 70
# 				}
# 			}
# 			65 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 65
# 				}
# 			}
# 			60 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 60
# 				}
# 			}
# 			55 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 55
# 				}
# 			}
# 			50 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 50
# 				}
# 			}
# 			45 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 45
# 				}
# 			}
# 			40 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 40
# 				}
# 			}
# 			30 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01001
# 					days = 30
# 				}
# 			}
# 		}
# 	}

# 	#Envoy starts his journey
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01000.a
# 		trigger_event = {
# 			on_action = agot_btw_nw_petition_random_event
# 			days = { 2 10 }
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy arrives to the lord RC Version
# agot_btw_struggle_nightswatch.01001 = {
# 	type = character_event
# 	title = agot_btw_struggle_nightswatch.01001.t
# 	desc = agot_btw_struggle_nightswatch.01001.desc
# 	theme = realm

# 	trigger = {
# 		scope:nw_petition_envoy = {
# 			is_alive = yes
# 		}
# 	}

# 	left_portrait = {
# 		character = scope:nw_petition_envoy
# 		#animation = personality:bold
# 	}

# 	right_portrait = {
# 		character = scope:nw_petition_target
# 		#animation =
# 	}

# 	#Envoy starts his journey
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01001.a
# 		scope:nw_petition_target = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01002
# 				delayed = yes
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy arrives to the lord (lord POV) RC Version
# agot_btw_struggle_nightswatch.01002 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01002.t

# 	trigger = {
# 		scope:nw_petition_envoy = {
# 			is_alive = yes
# 		}
# 	}

# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					title:k_the_wall.holder = {
# 						var:nw_petition_type = flag:Supplies
# 					}
# 				}
# 				desc =  agot_btw_struggle_nightswatch.01002.desc.a
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					title:k_the_wall.holder = {
# 						var:nw_petition_type = flag:Men
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01002.desc.b
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					title:k_the_wall.holder = {
# 						var:nw_petition_type = flag:Both
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01002.desc.c
# 			}
# 			#Fallback if something gone wrong
# 			desc = NW_SOMETHING_BROKE
# 		}
# 	}

# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#Accept Petition
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01002.a
# 		set_variable = nw_accepted_petition_ruler
# 		#go straight to envoy reaction event
# 		custom_tooltip = {
# 			text = nw_ruler_accepted_petition
# 			title:k_the_wall.holder = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01004
# 				}
# 			}
# 		}
# 	}

# 	#Accept Petition with condition
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01002.b
# 		set_variable = nw_accepted_petition_condition_ruler
# 		#go to condition selection event
# 		custom_tooltip = {
# 			text = nw_ruler_select_condition
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01003
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#Reject Petition
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01002.c
# 		set_variable = nw_rejected_petition_ruler
# 		#go straight to envoy reaction event
# 		custom_tooltip = {
# 			text = nw_ruler_petition_inital_reject
# 			title:k_the_wall.holder = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01004
# 					delayed = yes
# 				}
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Lord selects condition for acceptance of petition (lord POV) RC Version
# agot_btw_struggle_nightswatch.01003 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01003.t
# 	desc = agot_btw_struggle_nightswatch.01003.desc
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#Condition list rn looks like this

# 	#Free captives from wildlings
# #	option = {
# #		trigger = {
# #			this.house = {
# #				any_house_member = {
# #					is_imprisoned = yes
# #					exists = imprisoner #just to be sure
# #					imprisoner = {
# #						culture = {
# #							has_cultural_pillar = language_old_tongue
# #						}
# #					}
# #				}
# #			}
# #		}
# #		name = agot_btw_struggle_nightswatch.01003.a
# #		set_variable = {
# #			name = nw_petition_condition
# #			value = flag:free_wildlings #AGOT ERROR - Set but not used
# #		}
# #		title:k_the_wall.holder = {
# #			trigger_event = {
# #				id = agot_btw_struggle_nightswatch.01004
# #				delayed = yes
# #			}
# #		}
# #	}

# 	#Take Unwanted Family Member
# 	option = {
# 		trigger = {
# 			this.house = {
# 				any_house_member = {
# 					is_female = no
# 					age >= 16
# 					opinion = {
# 						target = this
# 						value <= 0
# 					}
# 				}
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01003.b
# 		set_variable = { #AGOT TODO - set but not used
# 			name = nw_petition_condition
# 			value = flag:family_member
# 		}
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01004
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#Attack Wildling Tribe
# 	option = {
# 		trigger = {
# 			scope:nw_petition_target = {
# 				primary_title = {
# 					target_is_de_jure_liege_or_above = title:k_the_north
# 				}
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01003.c
# 		# set_variable = {
# 		#  	name = nw_petition_condition
# 		#  	value = flag:wildling_tribe
# 		# }
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01004
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#Pay
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01003.d
# 		set_variable = {
# 			name = nw_petition_condition
# 			value = flag:pay #AGOT ERROR - Set but not used
# 		}
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01004
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#Gift rare Artifact
# 	option = {
# 		trigger = {
# 			any_artifact = {
# 				artifact_owner = {
# 					this = title:k_the_wall.holder
# 				}
# 				artifact_rarity >= 3
# 				#AGOT TODO: MAYBE ADD VALYRIAN STEEL BLOCK, IF ONE EXISTS?
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01003.e
# 		set_variable = {
# 			name = nw_petition_condition
# 			value = flag:rare_artifact #AGOT ERROR - Set but not used
# 		}
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01004
# 				delayed = yes
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy learns of Lord decision RC Version
# agot_btw_struggle_nightswatch.01004 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01004.t
# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_ruler
# 					}
# 				}
# 				desc =  agot_btw_struggle_nightswatch.01004.desc.a
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_condition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01004.desc.b
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_rejected_petition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01004.desc.c
# 			}
# 			#Fallback if something gone wrong
# 			desc = NW_SOMETHING_BROKE
# 		}
# 	}
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}


# 	#Accept Ruler Decision
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01004.a
# 		trigger = {
# 			scope:nw_petition_target = {
# 				OR = {
# 					has_variable = nw_accepted_petition_ruler
# 					has_variable = nw_accepted_petition_condition_ruler
# 					has_variable = nw_rejected_petition_ruler
# 				}
# 			}
# 		}
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01009
# 			delayed = yes
# 		}
# 	}

# 	#Try to persuade
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01004.b
# 		trigger = {
# 			scope:nw_petition_target = {
# 				OR = {
# 					has_variable = nw_accepted_petition_condition_ruler
# 					has_variable = nw_rejected_petition_ruler
# 				}
# 			}
# 		}
# 		#set_variable = nw_petition_persuation Unused, uncomment when used
# 		if = {
# 			limit = {
# 				scope:nw_petition_target = {
# 					is_ai = yes
# 				}
# 			}
# 			random_list = {
# 				50 = {
# 					trigger_event = {
# 						id = agot_btw_struggle_nightswatch.01005
# 					}
# 					modifier = {
# 						factor = 2
# 						scope:nw_petition_envoy.diplomacy > scope:nw_petition_target.diplomacy
# 					}
# 					modifier = {
# 						factor = 0.2
# 						scope:nw_petition_envoy.diplomacy < scope:nw_petition_target.diplomacy
# 					}
# 					modifier = {
# 						factor = 1.5
# 						scope:nw_petition_envoy.stewardship > scope:nw_petition_target.stewardship
# 					}
# 					modifier = {
# 						factor = 0.5
# 						scope:nw_petition_envoy.stewardship < scope:nw_petition_target.stewardship
# 					}
# 					modifier = {
# 						factor = 0.8
# 						scope:nw_petition_envoy.intrigue > scope:nw_petition_target.intrigue
# 					}
# 					modifier = {
# 						factor = 0.3
# 						scope:nw_petition_envoy.intrigue < scope:nw_petition_target.intrigue
# 					}
# 					modifier = {
# 						factor = 1.2
# 						scope:nw_petition_envoy.learning > scope:nw_petition_target.learning
# 					}
# 					modifier = {
# 						factor = 0.6
# 						scope:nw_petition_envoy.learning < scope:nw_petition_target.learning
# 					}
# 				}
# 				50 = {
# 					trigger_event = {
# 						id = agot_btw_struggle_nightswatch.01006
# 					}
# 					modifier = {
# 						factor = 0.2
# 						scope:nw_petition_envoy.diplomacy > scope:nw_petition_target.diplomacy
# 					}
# 					modifier = {
# 						factor = 2
# 						scope:nw_petition_envoy.diplomacy < scope:nw_petition_target.diplomacy
# 					}
# 					modifier = {
# 						factor = 0.5
# 						scope:nw_petition_envoy.stewardship > scope:nw_petition_target.stewardship
# 					}
# 					modifier = {
# 						factor = 1.5
# 						scope:nw_petition_envoy.stewardship < scope:nw_petition_target.stewardship
# 					}
# 					modifier = {
# 						factor = 0.3
# 						scope:nw_petition_envoy.intrigue > scope:nw_petition_target.intrigue
# 					}
# 					modifier = {
# 						factor = 0.8
# 						scope:nw_petition_envoy.intrigue < scope:nw_petition_target.intrigue
# 					}
# 					modifier = {
# 						factor = 0.6
# 						scope:nw_petition_envoy.learning > scope:nw_petition_target.learning
# 					}
# 					modifier = {
# 						factor = 1.2
# 						scope:nw_petition_envoy.learning < scope:nw_petition_target.learning
# 					}
# 				}
# 			}
# 		}
# 		else = {
# 			scope:nw_petition_target = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01007
# 				}
# 			}
# 		}
# 	}

# 	#Try to bribe
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01004.c
# 		trigger = {
# 			scope:nw_petition_target = {
# 				OR = {
# 					has_variable = nw_accepted_petition_condition_ruler
# 					has_variable = nw_rejected_petition_ruler
# 				}
# 			}
# 		}
# 		#set_variable = nw_petition_bribe Unused, reenable when used
# 		if = {
# 			limit = {
# 				scope:nw_petition_target = {
# 					is_ai = yes
# 				}
# 			}
# 			random_list = {
# 				50 = {
# 					trigger_event = {
# 						id = agot_btw_struggle_nightswatch.01005
# 					}
# 				}
# 				50 = {
# 					trigger_event = {
# 						id = agot_btw_struggle_nightswatch.01006
# 					}
# 				}
# 			}
# 		}
# 		else = {
# 			title:k_the_wall.holder = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01007
# 					delayed = yes
# 				}
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy succeed in persuadion RC Version
# agot_btw_struggle_nightswatch.01005 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01005.t
# 	desc = agot_btw_struggle_nightswatch.01005.desc
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#you succeed
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01005.a
# 		scope:nw_petition_target = {
# 			switch = {
# 				trigger = has_variable
# 				nw_accepted_petition_condition_ruler = {
# 					set_variable = nw_accepted_petition_ruler
# 					remove_variable = nw_accepted_petition_condition_ruler
# 				}
# 				nw_rejected_petition_ruler = {
# 					set_variable = nw_accepted_petition_condition_ruler
# 					remove_variable = nw_rejected_petition_ruler
# 				}
# 			}
# 		}
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01009
# 			delayed = yes
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy fails to persuade the ruler RC Version
# agot_btw_struggle_nightswatch.01006 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01006.t
# 	desc = agot_btw_struggle_nightswatch.01006.desc
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#you fail
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01006.a
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01009
# 			delayed = yes
# 		}
# 	}
# }

# NW Royal Court Disabled
#Lord decides if he is persuaded (lord POV) RC Version
# agot_btw_struggle_nightswatch.01007 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01007.t
# 	desc = agot_btw_struggle_nightswatch.01007.desc
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#accept envoy arguments
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01007.a
# 		switch = {
# 			trigger = has_variable
# 			nw_accepted_petition_condition_ruler = {
# 				set_variable = nw_accepted_petition_ruler
# 				remove_variable = nw_accepted_petition_condition_ruler
# 			}
# 			nw_rejected_petition_ruler = {
# 				set_variable = nw_accepted_petition_condition_ruler
# 				remove_variable = nw_rejected_petition_ruler
# 			}
# 		}
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01005
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#simply deny
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01007.b

# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.01006
# 				delayed = yes
# 			}
# 		}
# 	}

# 	#deny and exile envoy for the court for displaying such brazeness
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01007.c

# 		progress_towards_rival_effect = {
# 			CHARACTER = scope:nw_petition_envoy
# 			REASON = rival_troublesome_warrior #change
# 			OPINION = -70
# 		}

# 		every_ruler = {
# 			limit = {
# 				capital_province = {
# 					OR = {
# 						geographical_region = world_westeros_dorne
# 						geographical_region = world_westeros_the_crownlands
# 						geographical_region = world_westeros_the_iron_islands
# 						geographical_region = world_westeros_the_north
# 						geographical_region = world_westeros_the_reach
# 						geographical_region = world_westeros_the_riverlands
# 						geographical_region = world_westeros_the_stormlands
# 						geographical_region = world_westeros_the_vale
# 						geographical_region = world_westeros_the_westerlands
# 					}
# 				}
# 				primary_title = {
# 					tier > 1
# 				}
# 			}

# 			if = {
# 				limit = {
# 					is_ai = no
# 				}
# 				trigger_event = agot_btw_struggle_nightswatch.02011
# 			}

# 			add_opinion = {
# 				target = root
# 				modifier = angry_opinion #AGOT TODO CHANGE TO GUEST RIGHT VIOLATED
# 				opinion = -50 #AGOT TODO MAYBE CHANGE?
# 			}
# 		}

# 		scope:nw_petition_envoy = {
# 			progress_towards_rival_effect = {
# 				CHARACTER = root
# 				REASON = rival_troublesome_warrior #change
# 				OPINION = -70
# 			}
# 		}
# 		title:k_the_wall.holder = {
# 			trigger_event = {
# 				id = agot_btw_struggle_nightswatch.02011
# 				delayed = yes
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy prepares to return to the wall RC Version
# agot_btw_struggle_nightswatch.01008 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01008.t
# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_ruler
# 					}
# 				}
# 				desc =  agot_btw_struggle_nightswatch.01008.desc.a
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_condition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01008.desc.b
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_rejected_petition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01008.desc.c
# 			}
# 			#Fallback if something gone wrong
# 			desc = NW_SOMETHING_BROKE
# 		}
# 	}
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	option = {
# 		name = agot_btw_struggle_nightswatch.01008.a

# 		trigger_event = {
# 			on_action = agot_btw_nw_petition_return_random_event
# 			days = { 1 3 }
# 		}
# 		#70 days from rhoynish dorne
# 		#65 days from stone dorne
# 		#60 days from reach proper / Dragonstone
# 		#55 days from stormlands / Reach part of crownlands / Stormlands part of crownlands
# 		#50 days from KL / Westerlands / Iron Islands
# 		#45 days from Vale
# 		#40 days from trident
# 		#30 days from North
# 		switch = {
# 			trigger = agot_btw_how_far_is_target_capital

# 			70 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 70
# 				}
# 			}
# 			65 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 65
# 				}
# 			}
# 			60 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 60
# 				}
# 			}
# 			55 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 55
# 				}
# 			}
# 			50 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 50
# 				}
# 			}
# 			45 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 45
# 				}
# 			}
# 			40 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 40
# 				}
# 			}
# 			30 = {
# 				trigger_event = {
# 					id = agot_btw_struggle_nightswatch.01010
# 					days = 30
# 				}
# 			}
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy learns of ruler second decision RC Version
# agot_btw_struggle_nightswatch.01009 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01009.t
# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_ruler
# 					}
# 				}
# 				desc =  agot_btw_struggle_nightswatch.01009.desc.a
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_condition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01009.desc.b
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_rejected_petition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01009.desc.c
# 			}
# 			#Fallback if something gone wrong
# 			desc = NW_SOMETHING_BROKE
# 		}
# 	}
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	#Accept Ruler Decision
# 	option = {
# 		trigger = {
# 			OR = {
# 				has_variable = nw_accepted_petition_condition_ruler
# 				has_variable = nw_rejected_petition_ruler
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01009.a
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01008
# 			delayed = yes
# 		}
# 	}

# 	#Reject Ruler Decision
# 	option = {
# 		trigger = {
# 			OR = {
# 				has_variable = nw_accepted_petition_condition_ruler
# 				has_variable = nw_rejected_petition_ruler
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01009.b
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01008
# 			delayed = yes
# 		}
# 	}

# 	#Ok - for accepted petition
# 	option = {
# 		trigger = {
# 			NOR = {
# 				has_variable = nw_accepted_petition_condition_ruler
# 				has_variable = nw_rejected_petition_ruler
# 			}
# 		}
# 		name = agot_btw_struggle_nightswatch.01009.c
# 		trigger_event = {
# 			id = agot_btw_struggle_nightswatch.01008
# 			delayed = yes
# 		}
# 	}
# }

# NW Royal Court Disabled
#Envoy returns to wall RC Version
# agot_btw_struggle_nightswatch.01010 = {
# 	type = court_event
# 	title = agot_btw_struggle_nightswatch.01010.t
# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_ruler
# 					}
# 				}
# 				desc =  agot_btw_struggle_nightswatch.01010.desc.a
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_accepted_petition_condition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01010.desc.b
# 			}
# 			triggered_desc = {
# 				trigger = {
# 					scope:nw_petition_target = {
# 						has_variable = nw_rejected_petition_ruler
# 					}
# 				}
# 				desc = agot_btw_struggle_nightswatch.01010.desc.c
# 			}
# 			#Fallback if something gone wrong
# 			desc = NW_SOMETHING_BROKE
# 		}
# 	}
# 	theme = realm

# 	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }
# 	court_scene = {
# 		button_position_character = root
# 		court_event_force_open = yes
# 		show_timeout_info = no
# 		should_pause_time = yes
# 		#roles = {
# 		# 	root = {
# 		# 		role = ruler
# 		# 		animation = throne_room_ruler
# 		# 	}
# 		#	root = {
# 		#		cp:councillor_chancellor = {
# 		#			group = event_group
# 		#			animation = throne_room_kneel_2
# 		#		}
# 		#	}
# 		#}
# 	}

# 	immediate = {
# 	}

# 	#Send the Man to the guard
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.a
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Men
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:men_army
# 		}
# 	}

# 	#Send the Man to the unused castles - MOTHBALLED FOR NOW
# 	#option = {
# 	#	name = agot_btw_struggle_nightswatch.01010.b
# 	#	trigger = {
# 	#		exists = var:nw_petition_type
# 	#		var:nw_petition_type = flag:Men
# 	#	}
# 	#	agot_nw_post_petition_scripted_effect = {
# 	#		PETITION_TYPE = flag:men_add_to_pool
# 	#	}
# 	#}

# 	#Send the supplies to people
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.c
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Supplies
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_army
# 		}
# 	}

# 	#Send the supplies to smaller posts
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.d
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Supplies
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_normal
# 		}
# 	}


# 	#Send the Man to the main castles, Send Supplies to Man
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.e
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Both
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_army_army_army
# 		}
# 	}

# 	#Send the Man to the unused castles, Send Supplies to Man
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.f
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Both
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_army_army_pool
# 		}
# 	}

# 	#Send the Man to the main castles, Send the supplies to smaller posts
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.g
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Both
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_normal_army_army
# 		}
# 	}

# 	#Send the Man to the unused castles, Send the supplies to smaller posts
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.h
# 		trigger = {
# 			exists = var:nw_petition_type
# 			var:nw_petition_type = flag:Both
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:supplies_normal_army_pool
# 		}
# 	}

# 	#We got rejected sadness
# 	option = {
# 		name = agot_btw_struggle_nightswatch.01010.i
# 		trigger = {
# 			exists = var:nw_rejected_petition_ruler
# 		}
# 		agot_nw_post_petition_scripted_effect = {
# 			PETITION_TYPE = flag:nothing_sad_emoji
# 		}
# 	}
# }


#Envoy starts his journey - Non RC DLC
agot_btw_struggle_nightswatch.02000 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01000.t
	desc = agot_btw_struggle_nightswatch.01000.desc
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = cp:councillor_chancellor
		#animation =
	}

	immediate = {
		root = {
			cp:councillor_chancellor = {
				save_scope_as = nw_petition_envoy
			}
		}

		#70 days from rhoynish dorne
		#65 days from stone dorne
		#60 days from reach proper / Dragonstone
		#55 days from stormlands / Reach part of crownlands / Stormlands part of crownlands
		#50 days from KL / Westerlands / Iron Islands
		#45 days from Vale
		#40 days from trident
		#30 days from North
		switch = {
			trigger = agot_btw_how_far_is_target_capital

			70 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 70
				}
			}
			65 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 65
				}
			}
			60 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 60
				}
			}
			55 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 55
				}
			}
			50 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 50
				}
			}
			45 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 45
				}
			}
			40 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 40
				}
			}
			30 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02001
					days = 30
				}
			}
		}
	}


	#Envoy starts his journey
	option = {
		name = agot_btw_struggle_nightswatch.01000.a
		trigger_event = {
			on_action = agot_btw_nw_petition_random_event
			days = { 2 10 }
		}
	}
}

#Envoy arrives to the lord
agot_btw_struggle_nightswatch.02001 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01001.t
	desc = agot_btw_struggle_nightswatch.01001.desc
	theme = realm

	left_portrait = {
		character = scope:nw_petition_envoy
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}

	#Envoy starts his journey
	option = {
		name = agot_btw_struggle_nightswatch.01001.a
		scope:nw_petition_target = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02002
				delayed = yes
			}
		}
	}
}

#Envoy arrives to the lord (lord POV) Non-RC Version
agot_btw_struggle_nightswatch.02002 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01002.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					title:k_the_wall.holder = {
						var:nw_petition_type = flag:Supplies
					}
				}
				desc =  agot_btw_struggle_nightswatch.01002.desc.a
			}
			triggered_desc = {
				trigger = {
					title:k_the_wall.holder = {
						var:nw_petition_type = flag:Men
					}
				}
				desc = agot_btw_struggle_nightswatch.01002.desc.b
			}
			triggered_desc = {
				trigger = {
					title:k_the_wall.holder = {
						var:nw_petition_type = flag:Both
					}
				}
				desc = agot_btw_struggle_nightswatch.01002.desc.c
			}
			#Fallback if something gone wrong
			desc = NW_SOMETHING_BROKE
		}
	}

	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		#animation =
	}

	#Accept Petition
	option = {
		name = agot_btw_struggle_nightswatch.01002.a
		set_variable = nw_accepted_petition_ruler
		#go straight to envoy reaction event
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_honor = 1
				ai_compassion = 0.5
			}
		}
	}

	#Accept Petition with condition
	option = {
		name = agot_btw_struggle_nightswatch.01002.b
		set_variable = nw_accepted_petition_condition_ruler
		#go to condition selection event
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02003
		}
		ai_chance = 0 #Conditions need to be fixed before enabling this
	}

	#Reject Petition
	option = {
		name = agot_btw_struggle_nightswatch.01002.c
		set_variable = nw_rejected_petition_ruler
		#go straight to envoy reaction event
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_honor = -1
				ai_compassion = -0.5
			}
		}
	}
}

#Lord selects condition for acceptance of petition (lord POV) Non-RC Version
agot_btw_struggle_nightswatch.02003 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01003.t
	desc = agot_btw_struggle_nightswatch.01003.desc
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		#animation =
	}

	#Condition list rn looks like this

	#Free captives from wildlings
#	option = {
#		trigger = {
#			this.house = {
#				any_house_member = {
#					is_imprisoned = yes
#					exists = imprisoner #just to be sure
#					imprisoner = {
#						culture = {
#							has_cultural_pillar = language_old_tongue
#						}
#					}
#				}
#			}
#		}
#		name = agot_btw_struggle_nightswatch.01003.a
#		set_variable = {
#			name = nw_petition_condition
#			value = flag:free_wildlings #AGOT ERROR - Set but not used
#		}
#		title:k_the_wall.holder = {
#			trigger_event = {
#				id = agot_btw_struggle_nightswatch.02004
#				delayed = yes
#			}
#		}
#	}

	#Take Unwanted Family Member
	option = {
		trigger = {
			root.house = {
				any_house_member = {
					NOT = { this = scope:nw_petition_target  }
					is_female = no
					age >= 16
					opinion = {
						target = root
						value <= 0
					}
				}
			}
		}
		name = agot_btw_struggle_nightswatch.01003.b
		set_variable = { #AGOT TODO - set but not used
			name = nw_petition_condition
			value = flag:family_member
		}
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
	}

	#Attack Wildling Tribe
	option = {
		trigger = {
			scope:nw_petition_target = {
				primary_title = {
					target_is_de_jure_liege_or_above = title:k_the_north
				}
			}
		}
		name = agot_btw_struggle_nightswatch.01003.c
		# set_variable = {
		#  	name = nw_petition_condition
		#  	value = flag:wildling_tribe
		# }
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
	}

	#Pay
	option = {
		name = agot_btw_struggle_nightswatch.01003.d
		set_variable = {
			name = nw_petition_condition
			value = flag:pay #AGOT ERROR - Set but not used
		}
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
	}

	#Gift rare Artifact
	option = {
		trigger = {
			any_artifact = {
				artifact_owner = {
					this = title:k_the_wall.holder
				}
				artifact_rarity >= 3
				#AGOT TODO: MAYBE ADD VALYRIAN STEEL BLOCK, IF ONE EXISTS?
			}
		}
		name = agot_btw_struggle_nightswatch.01003.e
		set_variable = {
			name = nw_petition_condition
			value = flag:rare_artifact
		}
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02004
				delayed = yes
			}
		}
	}
}

#Envoy learns of Lord decision Non-RC Version
agot_btw_struggle_nightswatch.02004 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01004.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_ruler
					}
				}
				desc =  agot_btw_struggle_nightswatch.01004.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_condition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01004.desc.b
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_rejected_petition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01004.desc.c
			}
			#Fallback if something gone wrong
			desc = NW_SOMETHING_BROKE
		}
	}
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}


	#Accept Ruler Decision
	option = {
		name = agot_btw_struggle_nightswatch.01004.a
		trigger = {
			scope:nw_petition_target = {
				OR = {
					has_variable = nw_accepted_petition_ruler
					has_variable = nw_accepted_petition_condition_ruler
					has_variable = nw_rejected_petition_ruler
				}
			}
		}
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02009
			delayed = yes
		}
	}

	#Try to persuade
	option = {
		name = agot_btw_struggle_nightswatch.01004.b
		trigger = {
			scope:nw_petition_target = {
				OR = {
					has_variable = nw_accepted_petition_condition_ruler
					has_variable = nw_rejected_petition_ruler
				}
			}
		}
		if = {
			limit = {
				scope:nw_petition_target = {
					is_ai = yes
				}
			}
			scope:nw_petition_envoy = {
				duel = {
					skill = diplomacy
					target = scope:nw_petition_target
					# You win: some minor prestige, more opinion.
					50 = {
						compare_modifier = {
							value = scope:duel_value
							multiplier = 3.5
							min = -49
						}
						custom_tooltip = {
							text = nw_petition_persuation_succeds
							root = {
								trigger_event = {
									id = agot_btw_struggle_nightswatch.02005
									delayed = yes
								}
							}
						}
					}
					50 = {
						compare_modifier = {
							value = scope:duel_value
							multiplier = -3.5
							min = -49
						}
						custom_tooltip = {
							text = nw_petition_persuasion_fail
							root = {
								trigger_event = {
									id = agot_btw_struggle_nightswatch.02006
									delayed = yes
								}
							}
						}
					}
				}
			}
		}
		else = {
			custom_tooltip = {
				text = nw_petition_persuation_player_target
				scope:nw_petition_target = {
					trigger_event = {
						id = agot_btw_struggle_nightswatch.02007
						delayed = yes
					}
				}
			}
		}
	}

	#Try to bribe
	# option = {
	# 	name = agot_btw_struggle_nightswatch.01004.c
	# 	trigger = {
	# 		scope:nw_petition_target = {
	# 			OR = {
	# 				has_variable = nw_accepted_petition_condition_ruler
	# 				has_variable = nw_rejected_petition_ruler
	# 			}
	# 		}
	# 	}
	# 	if = {
	# 		limit = {
	# 			scope:nw_petition_target = {
	# 				is_ai = yes
	# 			}
	# 		}
	# 		scope:nw_petition_envoy = {
	# 			duel = {
	# 				skill = diplomacy
	# 				target = scope:nw_petition_target
	# 				# You win: some minor prestige, more opinion.
	# 				50 = {
	# 					compare_modifier = {
	# 						value = scope:duel_value
	# 						multiplier = 3.5
	# 						min = -49
	# 					}
	# 					custom_tooltip = {
	# 						text = nw_petition_persuation_succeds
	# 						trigger_event = {
	# 							id = agot_btw_struggle_nightswatch.02005
	# 							delayed = yes
	# 						}
	# 					}
	# 				}
	# 				50 = {
	# 					compare_modifier = {
	# 						value = scope:duel_value
	# 						multiplier = -3.5
	# 						min = -49
	# 					}
	# 					custom_tooltip = {
	# 						text = nw_petition_persuasion_fail
	# 						trigger_event = {
	# 							id = agot_btw_struggle_nightswatch.02006
	# 							delayed = yes
	# 						}
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# 	else = {
	# 		custom_tooltip = {
	# 			text = nw_petition_persuation_player_target
	# 			scope:nw_petition_target = {
	# 				trigger_event = {
	# 					id = agot_btw_struggle_nightswatch.02007
	# 					delayed = yes
	# 				}
	# 			}
	# 		}
	# 	}
	# }
}

#Envoy succeed in persuadion Non-RC Version
agot_btw_struggle_nightswatch.02005 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01005.t
	desc = agot_btw_struggle_nightswatch.01005.desc
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}

	#you succeed
	option = {
		name = agot_btw_struggle_nightswatch.01005.a
		scope:nw_petition_target = {
			switch = {
				trigger = has_variable
				nw_accepted_petition_condition_ruler = {
					set_variable = nw_accepted_petition_ruler
					remove_variable = nw_accepted_petition_condition_ruler
				}
				nw_rejected_petition_ruler = {
					set_variable = nw_accepted_petition_condition_ruler
					remove_variable = nw_rejected_petition_ruler
				}
			}
		}
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02009
		}
	}

}

#Envoy fails to persuade the ruler Non-RC Version
agot_btw_struggle_nightswatch.02006 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01006.t
	desc = agot_btw_struggle_nightswatch.01006.desc
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}

	#you fail
	option = {
		name = agot_btw_struggle_nightswatch.01006.a
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02009
		}
	}
}

#Lord decides if he is persuaded (lord POV) Non-RC Version
agot_btw_struggle_nightswatch.02007 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01007.t
	desc = agot_btw_struggle_nightswatch.01007.desc
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		#animation =
	}

	#accept envoy arguments
	option = {
		name = agot_btw_struggle_nightswatch.01007.a
		switch = {
			trigger = has_variable
			nw_accepted_petition_condition_ruler = {
				set_variable = nw_accepted_petition_ruler
				remove_variable = nw_accepted_petition_condition_ruler
			}
			nw_rejected_petition_ruler = {
				set_variable = nw_accepted_petition_condition_ruler
				remove_variable = nw_rejected_petition_ruler
			}
		}
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02005
			}
		}
	}

	#simply deny
	option = {
		name = agot_btw_struggle_nightswatch.01007.b

		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02006
			}
		}
	}

	#deny and exile envoy for the court for displaying such brazeness
	option = {
		name = agot_btw_struggle_nightswatch.01007.c

		progress_towards_rival_effect = {
			CHARACTER = scope:nw_petition_envoy
			REASON = rival_troublesome_warrior #change
			OPINION = -70
		}

		every_ruler = {
			limit = {
				capital_province = {
					OR = {
						geographical_region = world_westeros_dorne
						geographical_region = world_westeros_the_crownlands
						geographical_region = world_westeros_the_iron_islands
						geographical_region = world_westeros_the_north
						geographical_region = world_westeros_the_reach
						geographical_region = world_westeros_the_riverlands
						geographical_region = world_westeros_the_stormlands
						geographical_region = world_westeros_the_vale
						geographical_region = world_westeros_the_westerlands
					}
				}
				primary_title = {
					tier > 1
				}
			}

			if = {
				limit = {
					is_ai = no
				}
				trigger_event = agot_btw_struggle_nightswatch.02011
			}

			add_opinion = {
				target = root
				modifier = angry_opinion #AGOT TODO CHANGE TO GUEST RIGHT VIOLATED
				opinion = -50 #AGOT TODO MAYBE CHANGE?
			}
		}

		scope:nw_petition_envoy = {
			progress_towards_rival_effect = {
				CHARACTER = root
				REASON = rival_troublesome_warrior #change
				OPINION = -70
			}
		}
		title:k_the_wall.holder = {
			trigger_event = {
				id = agot_btw_struggle_nightswatch.02011
			}
		}
	}
}

#Envoy prepares to return to the wall Non-RC Version
agot_btw_struggle_nightswatch.02008 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01008.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_ruler
					}
				}
				desc =  agot_btw_struggle_nightswatch.01008.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_condition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01008.desc.b
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_rejected_petition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01008.desc.c
			}
			#Fallback if something gone wrong
			desc = NW_SOMETHING_BROKE
		}
	}
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_envoy
		#animation =
	}

	option = {
		name = agot_btw_struggle_nightswatch.01008.a

		trigger_event = {
			on_action = agot_btw_nw_petition_return_random_event
			days = { 1 3 }
		}
		#70 days from rhoynish dorne
		#65 days from stone dorne
		#60 days from reach proper / Dragonstone
		#55 days from stormlands / Reach part of crownlands / Stormlands part of crownlands
		#50 days from KL / Westerlands / Iron Islands
		#45 days from Vale
		#40 days from trident
		#30 days from North
		switch = {
			trigger = agot_btw_how_far_is_target_capital

			70 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 70
				}
			}
			65 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 65
				}
			}
			60 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 60
				}
			}
			55 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 55
				}
			}
			50 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 50
				}
			}
			45 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 45
				}
			}
			40 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 40
				}
			}
			30 = {
				trigger_event = {
					id = agot_btw_struggle_nightswatch.02010
					days = 30
				}
			}
		}
	}
}

#Envoy learns of ruler second decision Non-RC Version
agot_btw_struggle_nightswatch.02009 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01009.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_ruler
					}
				}
				desc =  agot_btw_struggle_nightswatch.01009.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_condition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01009.desc.b
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_rejected_petition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01009.desc.c
			}
			#Fallback if something gone wrong
			desc = NW_SOMETHING_BROKE
		}
	}
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}

	#Accept Ruler Decision
	option = {
		trigger = {
			OR = {
				has_variable = nw_accepted_petition_condition_ruler
				has_variable = nw_rejected_petition_ruler
			}
		}
		name = agot_btw_struggle_nightswatch.01009.a
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02008
			delayed = yes
		}
	}

	#Reject Ruler Decision
	option = {
		trigger = {
			OR = {
				has_variable = nw_accepted_petition_condition_ruler
				has_variable = nw_rejected_petition_ruler
			}
		}
		name = agot_btw_struggle_nightswatch.01009.b
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02008
			delayed = yes
		}
	}

	#Ok - for accepted petition
	option = {
		trigger = {
			NOR = {
				has_variable = nw_accepted_petition_condition_ruler
				has_variable = nw_rejected_petition_ruler
			}
		}
		name = agot_btw_struggle_nightswatch.01009.c
		trigger_event = {
			id = agot_btw_struggle_nightswatch.02008
			delayed = yes
		}
	}
}

#Envoy returns to wall Non-RC Version
agot_btw_struggle_nightswatch.02010 = {
	type = character_event
	title = agot_btw_struggle_nightswatch.01010.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_ruler
					}
				}
				desc =  agot_btw_struggle_nightswatch.01010.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_accepted_petition_condition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01010.desc.b
			}
			triggered_desc = {
				trigger = {
					scope:nw_petition_target = {
						has_variable = nw_rejected_petition_ruler
					}
				}
				desc = agot_btw_struggle_nightswatch.01010.desc.c
			}
			#Fallback if something gone wrong
			desc = NW_SOMETHING_BROKE
		}
	}
	theme = realm

	left_portrait = {
		character = root
		#animation = personality:bold
	}

	right_portrait = {
		character = scope:nw_petition_target
		#animation =
	}

	immediate = {

	}

	#We got rejected sadness
	option = {
		name = agot_btw_struggle_nightswatch.01010.i
		trigger = {
			exists = var:nw_rejected_petition_ruler
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:nothing_sad_emoji
		}
	}

	#Send the Man to the guard
	option = {
		name = agot_btw_struggle_nightswatch.01010.a
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Men
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:men_army
		}
	}

	#Send the Man to the unused castles - MOTHBALLED FOR NOW
	#option = {
	#	name = agot_btw_struggle_nightswatch.01010.b
	#	trigger = {
	#		exists = var:nw_petition_type
	#		var:nw_petition_type = flag:Men
	#	}
	#	agot_nw_post_petition_scripted_effect = {
	#		PETITION_TYPE = flag:men_add_to_pool
	#	}
	#}

	#Send the supplies to people
	option = {
		name = agot_btw_struggle_nightswatch.01010.c
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Supplies
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_army
		}
	}

	#Send the supplies to smaller posts
	option = {
		name = agot_btw_struggle_nightswatch.01010.d
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Supplies
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_normal
		}
	}


	#Send the Man to the main castles, Send Supplies to Man
	option = {
		name = agot_btw_struggle_nightswatch.01010.e
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Both
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_army_army_army
		}
	}

	#Send the Man to the unused castles, Send Supplies to Man
	option = {
		name = agot_btw_struggle_nightswatch.01010.f
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Both
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_army_army_pool
		}
	}

	#Send the Man to the main castles, Send the supplies to smaller posts
	option = {
		name = agot_btw_struggle_nightswatch.01010.g
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Both
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_normal_army_army
		}
	}

	#Send the Man to the unused castles, Send the supplies to smaller posts
	option = {
		name = agot_btw_struggle_nightswatch.01010.h
		trigger = {
			exists = var:nw_petition_type
			var:nw_petition_type = flag:Both
		}
		agot_nw_post_petition_scripted_effect = {
			PETITION_TYPE = flag:supplies_normal_army_pool
		}
	}
}

#Ruler violated the NW guest right - World event
agot_btw_struggle_nightswatch.02011 = {
	type = letter_event
	title = agot_btw_struggle_nightswatch.02011.t
	opening = {
		desc = agot_btw_struggle_nightswatch.02011.opening
	}
	desc = agot_btw_struggle_nightswatch.02011.desc
	sender = scope:nw_petition_envoy

	#ok
	option = {
		name = agot_btw_struggle_nightswatch.02011.a
	}
}

#declare war to keep lords promise
agot_btw_struggle_nightswatch.02012 = {
	type = character_event
	hidden = yes
	orphan = yes

	immediate = {
		debug_log = "onion"
	}
}