namespace = agot_paramour

#
agot_paramour.001 = {
	type = character_event
	hidden = yes

	trigger = {
		is_ai = yes
		save_temporary_scope_as = lover1
		any_relation = {
			type = lover
			is_ai = yes
			OR = {
				AND = {
					agot_can_add_paramour = yes
					scope:lover1 = { agot_can_be_paramour = yes }
				}
				AND = {
					scope:lover1 = { agot_can_add_paramour = yes }
					agot_can_be_paramour = yes
				}
			}
		}
	}

	immediate = {
		save_scope_as = lover1
		random_relation = {
			type = lover
			limit = {
				is_ai = yes
				OR = {
					AND = {
						agot_can_add_paramour = yes
						scope:lover1 = { agot_can_be_paramour = yes }
					}
					AND = {
						scope:lover1 = { agot_can_add_paramour = yes }
						agot_can_be_paramour = yes
					}
				}
			}
			save_scope_as = lover2
		}
		if = {
			limit = { scope:lover1 = { agot_can_have_paramour = yes } }
			scope:lover1 = { save_scope_as = noble }
			scope:lover2 = { save_scope_as = paramour }
		}
		else = {
			scope:lover2 = { save_scope_as = noble }
			scope:lover1 = { save_scope_as = paramour }
		}
		agot_become_paramour_effect = yes
	}
}