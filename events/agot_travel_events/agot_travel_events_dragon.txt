namespace = agot_travel_events_dragon

agot_travel_events_dragon.9000 = {
	type = character_event
	title = agot_travel_events_dragon.9000.t
	desc = agot_travel_events_dragon.9000.desc
	theme = travel

	trigger = {
		current_travel_plan ?= {
			has_travel_option = dragon_flight_option
			any_entourage_character = {
				NOT = { is_current_dragonrider = yes }
			}
		}
	}

	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:awkward_entourage_member
		animation = shame
	}

	immediate = {
		var:current_dragon = {
			save_scope_as = dragon
		}

		current_travel_plan ?= {
			random_entourage_character = {
				limit = {
					NOT = { is_current_dragonrider = yes }
					is_adult = yes
				}
				alternative_limit = {
					NOT = { is_current_dragonrider = yes }
				}
				save_scope_as = awkward_entourage_member
			}
		}
	}

	option = {
		name = agot_travel_events_dragon.9000.a

		current_travel_plan ?= {
			every_entourage_character = {
				limit = {
					NOT = { is_current_dragonrider = yes }
				}
				save_scope_as = entourage_member
				custom_tooltip = agot_travel_events_dragon.9000.tt
				hidden_effect = {
					root.current_travel_plan ?= {
						remove_character = prev
					}
					if = {
						limit = {
							exists = scope:activity
						}
						remove_from_activity = scope:activity
					}
					hidden_effect = {
						return_to_court = yes
					}
				}
			}
		}
	}
}
