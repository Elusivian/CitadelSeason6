
### Cultural trigger list

# drinks_alcohol_trigger - Would this person drink alcohol?
# holder_or_above_is_player_of_culture - Is this county's holder or anyone above them in the de facto hierarchy a player with the same culture?


######################
# Cultural triggers  #
######################

drinks_alcohol_trigger = {
	is_adult = yes
	OR = {
		has_trait = drunkard
		faith_forbids_alcohol_trigger = no
	}
	#AGOT Added
	is_human = yes
}

faith_forbids_alcohol_trigger = {
	OR = {
		#AGOT Disabled
		# religion = religion:islam_religion # Prohibited by khamr, a prohibition against intoxicants
		# religion = religion:jainism_religion # Prohibited along with the consumption of any fermented food
		#AGOT Added
		faith = faith:baelorism
		AND = {
			has_trait = zealous
			#AGOT Disabled
			#religion = religion:buddhism_religion # Discouraged as it disrupts progress along the eightfold path
			#AGOT Added
			religion = { is_in_family = rf_faith_of_the_seven }
		}
	}
}

holder_or_above_is_player_of_culture = {
	culture = {
		save_temporary_scope_as = this_culture
	}
	OR = {
		holder = {
			AND = {
				is_ai = no
				culture = scope:this_culture
			}
			any_liege_or_above = {
				is_ai = no
				culture = scope:this_culture
			}
		}
	}
}

culture_in_winter_geographical_region_trigger = {
	custom_description = {
		text = culture_in_winter_geographical_region_trigger_desc
		any_culture_county = {
			any_county_province = {
				OR = {
					#AGOT Modified
					# geographical_region = world_europe_north
					# geographical_region = world_europe_west
					# geographical_region = world_europe_east
					# geographical_region = world_steppe
					# geographical_region = world_tibet
					geographical_region = world_westeros_beyond_the_wall
					geographical_region = world_westeros_the_north
				}
			}
		}
	}
}

culture_in_non_sedentary_geographical_region_trigger = {
	#AGOT Modified
	# custom_description = {
	# 	text = culture_in_non_sedentary_geographical_region_trigger_desc
	# 	any_culture_county = {
	# 		any_county_province = {
	# 			OR = {
	# 				geographical_region = world_steppe
	# 			}
	# 		}
	# 	}
	# }
	always = no
}

culture_not_pacifistic_trigger = {
	custom_description = {
		text = culture_not_pacifist_trigger_desc
		NOT = {
			culture_tradition:tradition_pacifism = { is_in_list = traits }
		}
	}
}

culture_not_warlike_trigger = {
	custom_description = {
		text = culture_not_warlike_trigger_desc
		NOR = {
			culture_tradition:tradition_winter_warriors = { is_in_list = traits }
			culture_tradition:tradition_forest_fighters = { is_in_list = traits }
			culture_tradition:tradition_mountaineers = { is_in_list = traits }
			culture_tradition:tradition_warriors_of_the_dry = { is_in_list = traits }
			culture_tradition:tradition_highland_warriors = { is_in_list = traits }
			culture_tradition:tradition_jungle_warriors = { is_in_list = traits }
			culture_tradition:tradition_quarrelsome = { is_in_list = traits }
			culture_tradition:tradition_malleable_invaders = { is_in_list = traits }
			culture_tradition:tradition_hunters = { is_in_list = traits }
			culture_tradition:tradition_warrior_culture = { is_in_list = traits }
			culture_tradition:tradition_martial_admiration = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_winter_warriors_desc
		NOT = {
			culture_tradition:tradition_winter_warriors = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_forest_fighter_desc
		NOT = {
			culture_tradition:tradition_forest_fighters = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_mountaineers_desc
		NOT = {
			culture_tradition:tradition_mountaineers = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_warriors_of_the_dry_desc
		NOT = {
			culture_tradition:tradition_warriors_of_the_dry = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_highland_warriors_desc
		NOT = {
			culture_tradition:tradition_highland_warriors = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_jungle_warriors_desc
		NOT = {
			culture_tradition:tradition_jungle_warriors = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_quarrelsome_desc
		NOT = {
			culture_tradition:tradition_quarrelsome = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_malleable_invaders_desc
		NOT = {
			culture_tradition:tradition_malleable_invaders = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_hunters_desc
		NOT = {
			culture_tradition:tradition_hunters = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_warrior_culture_desc
		NOT = {
			culture_tradition:tradition_warrior_culture = { is_in_list = traits }
		}
	}
	custom_description = {
		text = culture_has_martial_admiration_desc
		NOT = {
			culture_tradition:tradition_martial_admiration = { is_in_list = traits }
		}
	}
}

should_have_same_faith_succession_trigger = {
	culture = {
		has_cultural_parameter = same_faith_inheritance_only
	}
	NOR = {
		government_has_flag = government_is_theocracy # Handled separately
		government_has_flag = government_is_holy_order # Handled separately
		government_has_flag = government_is_mercenary # Irrelevant
	}
}

not_tribal_raid_trigger = {
	culture = {
		has_cultural_parameter = not_tribal_raiding_malus
	}
	NOT = { government_has_flag = government_is_tribal }
}

culture_is_not_historical_hybrid_trigger = {
	#Used to tell if a hybrid culture is one of the historical hybrids or not, mainly in checks for AI hybridization checks related to game rules.
	#Expects to be used in culture scope
	NOR = {
		#AGOT Disabled
		# this = culture:norman
		# this = culture:maghrebi
		# this = culture:gaelic
		# this = culture:anglo_saxon
		# this = culture:scottish
		# this = culture:andalusian
		# this = culture:catalan
		# this = culture:english
		# this = culture:sicilian
		# this = culture:cisalpine
		#AGOT Added
		this = culture:crownlander
		this = culture:harborman
		this = culture:marcher
		this = culture:stone_dornish
		this = culture:krakenman
		this = culture:salt_dornish
		this = culture:sand_dornish
		this = culture:westerosi_valyrian
		this = culture:gogossosi
		this = culture:lorathi
		this = culture:myrish
		this = culture:pentoshi
	}
}

# Cultural MAA triggers - Used in various places for triggers, AI weights, etc.
culture_has_skirmisher_maa = {
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_horn_warrior
		# has_cultural_parameter = unlock_maa_shomer
		# has_cultural_parameter = unlock_maa_abudrar
		# has_cultural_parameter = unlock_maa_guinea_warrior
		# has_innovation = innovation_adaptive_militia #Goedendag - Later Era MAA
		has_cultural_parameter = unlock_maa_akritai
		#AGOT Added
		has_cultural_parameter = unlock_maa_arbor_marines
		has_cultural_parameter = unlock_maa_marsh_walker
		has_cultural_parameter = unlock_maa_trackers
		has_cultural_parameter = unlock_maa_greenblood_oars
		has_cultural_parameter = unlock_maa_sistermen_pirates
		has_cultural_parameter = unlock_maa_sea_snakes
		has_cultural_parameter = unlock_maa_purple_sailors
		has_cultural_parameter = unlock_maa_indentured_legion
	}
}

culture_has_archer_maa = {
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_archers_of_the_nile
		# has_cultural_parameter = unlock_maa_bush_hunter
		# has_cultural_parameter = unlock_maa_metsanvartija
		has_cultural_parameter = unlock_maa_longbowmen
		#AGOT Disabled
		# has_innovation = innovation_repeating_crossbow #Chu-ko-nu Archers
		# has_innovation = innovation_bamboo_bows #Paiks
		#AGOT Added
		has_cultural_parameter = unlock_maa_royal_crossbowmen
		has_cultural_parameter = unlock_maa_honeywine_quirrels
		has_cultural_parameter = unlock_maa_hunters_of_the_moon
		has_cultural_parameter = unlock_maa_river_bows
		has_cultural_parameter = unlock_maa_bloody_balesters
		has_cultural_parameter = unlock_maa_wolfswood_hunters
		has_cultural_parameter = unlock_maa_seal_hunters
		has_cultural_parameter = unlock_maa_myrish_crossbows
		has_cultural_parameter = unlock_maa_collared_bows
	}
}

culture_has_heavy_infantry_maa = {
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_ayyar
		# has_cultural_parameter = unlock_maa_mubarizun
		# has_cultural_parameter = unlock_maa_druzhina
		# has_cultural_parameter = unlock_maa_khandayat
		# has_cultural_parameter = unlock_maa_garudas
		# has_cultural_parameter = unlock_maa_palace_guards
		has_cultural_parameter = unlock_maa_huscarls
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_mountaineer
		# has_cultural_parameter = unlock_maa_zbrojnosh
		# has_innovation = innovation_sarawit #Sarawit - Later Era MAA
		# has_innovation = innovation_legionnaires #Praetorian
		has_cultural_parameter = unlock_maa_varangian_guards
		#AGOT Added
		has_cultural_parameter = unlock_maa_dragonkeepers
		has_cultural_parameter = unlock_maa_reavers
		has_cultural_parameter = unlock_maa_clan_champions
		has_cultural_parameter = unlock_maa_winter_wolves
		has_cultural_parameter = unlock_maa_misty_shields
		has_cultural_parameter = unlock_maa_weeping_guard
		has_cultural_parameter = unlock_maa_holy_guard
		has_cultural_parameter = unlock_maa_pit_warriors
		has_cultural_parameter = unlock_maa_bronze_raiders
		has_cultural_parameter = unlock_maa_she_bears
	}
}

culture_has_pikemen_maa = { #I.e. Spearmen
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_zupin_warrior
		# has_innovation = innovation_rectilinear_schiltron #Schiltron - Later Era MAA
		# has_innovation = innovation_pike_columns #Picchieri - Later Era MAA
		# has_innovation = innovation_zweihanders #Later Era MAA
		has_cultural_parameter = unlock_maa_skoutatoi
		#AGOT Added
		has_cultural_parameter = unlock_maa_stolen_spears
		has_cultural_parameter = unlock_maa_sun_spears
		has_cultural_parameter = unlock_maa_pass_pikes
		has_cultural_parameter = unlock_maa_cohort_of_the_three_thousand
		has_cultural_parameter = unlock_maa_unsullied
		has_cultural_parameter = unlock_maa_iron_legion
		has_cultural_parameter = unlock_maa_ornate_helms
	}
}

culture_has_light_cavalry_maa = {
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_mulaththamun
		# has_cultural_parameter = unlock_maa_hussar #Konni
		# has_innovation = innovation_desert_tactics #Chasseur
		# has_innovation = innovation_caballeros #Caballero
		# has_innovation = innovation_hobbies #Hobelar
		# has_innovation = innovation_sahel_horsemen #Sahel Horsemen
		#AGOT Added
		has_cultural_parameter = unlock_maa_finger_scouts
		has_cultural_parameter = unlock_maa_cape_watch
		has_cultural_parameter = unlock_maa_sand_steeds
		has_cultural_parameter = unlock_maa_unicorn_riders
	}
}

culture_has_heavy_cavalry_maa = {
	OR = {
		#AGOT Disabled
		# has_cultural_parameter = unlock_maa_cataphract
		# has_cultural_parameter = unlock_maa_monaspa
		# has_cultural_parameter = unlock_maa_tarkhan
		has_cultural_parameter = unlock_maa_conrois
		# has_innovation = innovation_valets #Gendarme - Later Era MAA
		#AGOT Added
		has_cultural_parameter = unlock_maa_barrow_knights
		has_cultural_parameter = unlock_maa_green_hand
		has_cultural_parameter = unlock_maa_summer_knights
		has_cultural_parameter = unlock_maa_storm_knights
		has_cultural_parameter = unlock_maa_winged_knights
	}
}

culture_has_archer_cavalry_maa = {
	has_cultural_parameter = unlock_maa_horse_archers
}

# Language trigger - Makes languages available when you diverge your culture
language_is_shown_trigger = {
	scope:character = {
		OR = {
			AND = {
				exists = var:legendary_culture
				var:legendary_culture = { has_cultural_pillar = $LANGUAGE$ }
			}
			AND = {
				# The target language needs to fulfill ALL of the following:
				any_sub_realm_county = { # Language needs to be well-represented within your realm
					percent >= 0.1
					culture = { has_cultural_pillar = $LANGUAGE$ }
				}
				any_sub_realm_county = { # Language needs to border your own culture
					culture = { has_cultural_pillar = $LANGUAGE$ }
					any_neighboring_county = {
						culture = { this = scope:character.culture }
					}
				}
				any_sub_realm_county = { # You need a minimum acceptance with any culture speaking the language
					culture = {
						has_cultural_pillar = $LANGUAGE$
						cultural_acceptance = {
							target = scope:character.culture
							value >= 25
						}
					}
				}
			}
		}
	}
}

# Language trigger - Makes heritages available when you diverge your culture
heritage_is_shown_trigger = {
	scope:character = {
		OR = {
			AND = {
				exists = var:legendary_culture
				var:legendary_culture = { has_cultural_pillar = $HERITAGE$ }
			}
			culture = { has_cultural_pillar = $HERITAGE$ }
		}
	}
}

# Checks if you could Hybridise with the culture without checking for acceptance
is_valid_for_hybridising_trigger = {
	$CHARACTER$ = {
		culture = {
			#AGOT Disabled, allow same heritage hybrids
			# NOT = { has_same_culture_heritage = $CULTURE$ }
			culture_age >= culture_hybrid_cooldown
		}
		trigger_if = {
			limit = {
				NAND = {
					exists = var:special_culture
					var:special_culture = $CULTURE$
				}
			}
			custom_description = {
				text = culture_present_in_realm_for_hybridization
				any_sub_realm_county = {
					culture = $CULTURE$
				}
			}
		}
		custom_description = {
			text = culture_is_not_parent_culture
			culture = {
				NOT = {
					any_parent_culture = {
						this = $CULTURE$
					}
				}
			}
		}
		custom_description = {
			text = culture_is_not_child_culture
			$CULTURE$ = {
				NOT = {
					any_parent_culture = {
						this = $CHARACTER$.culture
					}
				}
			}
		}
	}
}

# Checks if you can currently hybridise with the culture
can_hybridize_culture_trigger = {
	is_valid_for_hybridising_trigger = {
		CHARACTER = $CHARACTER$
		CULTURE = $CULTURE$
	}
	$CHARACTER$ = {
		culture = {
			cultural_acceptance = { target = $CULTURE$ value >= hybridization_threshold_value }
		}
	}
}


# Uses current scope and scope:culture
cultures_share_relevant_region_trigger = {
	OR = {
		#AGOT Disabled
		# AND = {
		# 	culture_overlaps_geographical_region = world_europe
		# 	scope:culture = {
		# 		culture_overlaps_geographical_region = world_europe
		# 	}
		# }
		# AND = {
		# 	culture_overlaps_geographical_region = world_asia_minor
		# 	scope:culture = {
		# 		culture_overlaps_geographical_region = world_asia_minor
		# 	}
		# }
		# AND = {
		# 	OR = {
		# 		culture_overlaps_geographical_region = world_middle_east
		# 		culture_overlaps_geographical_region = world_middle_east_persia
		# 	}
		# 	scope:culture = {
		# 		OR = {
		# 			culture_overlaps_geographical_region = world_middle_east
		# 			culture_overlaps_geographical_region = world_middle_east_persia
		# 		}
		# 	}
		# }
		# AND = {
		# 	culture_overlaps_geographical_region = world_steppe
		# 	scope:culture = {
		# 		culture_overlaps_geographical_region = world_steppe
		# 	}
		# }
		# AND = {
		# 	culture_overlaps_geographical_region = world_tibet
		# 	scope:culture = {
		# 		culture_overlaps_geographical_region = world_tibet
		# 	}
		# }
		# AND = {
		# 	OR = {
		# 		culture_overlaps_geographical_region = world_india
		# 		culture_overlaps_geographical_region = world_burma
		# 	}
		# 	scope:culture = {
		# 		OR = {
		# 			culture_overlaps_geographical_region = world_india
		# 			culture_overlaps_geographical_region = world_burma
		# 		}
		# 	}
		# }
		# AND = {
		# 	culture_overlaps_geographical_region = world_africa
		# 	scope:culture = {
		# 		culture_overlaps_geographical_region = world_africa
		# 	}
		# }
		#AGOT Added
		AND = {
			culture_overlaps_geographical_region = world_westeros_seven_kingdoms
			scope:culture = {
				culture_overlaps_geographical_region = world_westeros_seven_kingdoms
			}
		}
		AND = {
			culture_overlaps_geographical_region = world_westeros_beyond_the_wall
			scope:culture = {
				culture_overlaps_geographical_region = world_westeros_beyond_the_wall
			}
		}
	}
}

is_vegetarian_trigger = {
	OR = {
		culture = {
			has_cultural_parameter = cannot_hunt
		}
		faith_is_vegetarian_trigger = yes
	}
}

faith_is_vegetarian_trigger = {
	#AGOT Modified
	# faith = {
	# 	OR = {
	# 		religion = religion:buddhism_religion
	# 		religion = religion:jainism_religion
	# 		religion = religion:bon_religion
	# 		this = faith:mazdakism
	# 		this = faith:manichean
	# 	}
	# }
	always = no
}
