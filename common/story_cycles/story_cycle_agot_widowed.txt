#Widowed Character Cycle Badger

story_agot_widowed = {

	on_end = {
		debug_log = "Widowed story ended on:"
		debug_log_date = yes
	}

	on_owner_death = {
		scope:story = { end_story = yes }
	}

	effect_group = { # First Widowed Event
		days = { 3 7 }
		chance = 100

		triggered_effect = {
			trigger = {
				story_owner = {
					has_trait = widowed
					NOT = { has_character_flag = widow_story_began }
				}
			}
			effect = {
				story_owner = {
					trigger_event = agot_widowed_events.0001
				}
			}
		}
	}

	# Something happens - random events
	effect_group = {
		days = { 365 1825 }

		trigger = {
			story_owner = {
				has_trait = widowed
			}
		}

		first_valid = {
			triggered_effect = {
				trigger = { always = yes }
				effect = {
					story_owner = {
						trigger_event = {
							on_action = ongoing_widowed_events
						}
					}
				}
			}
		}
	}
}
