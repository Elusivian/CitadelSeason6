story_dragon_variable_storage = {
	on_setup = {
		title:c_ruins.holder = {
			var:transfered_dragon = {
				save_scope_as = dragon
			}
			remove_variable = transfered_dragon
		}
		# Used as a 'flag' to iterate through the multiple story cycles owned
		set_variable = {
			name = dragon_id
			value = scope:dragon
		}
		if = {
			limit = {
				scope:dragon = {
					is_historical_dragon = no
				}
			}
			# Dragon Genes
			set_variable = {
				name = dragon_age
				value = scope:dragon.var:dragon_age
			}
			set_variable = {
				name = dragon_size_base
				value = scope:dragon.var:dragon_size_base
			}
			set_variable = {
				name = dragon_size
				value = scope:dragon.dragon_size
			}
			set_variable = {
				name = gene_dragon_primary_color_value
				value = scope:dragon.var:gene_dragon_primary_color_value
			}
			set_variable = {
				name = gene_dragon_secondary_hue
				value = scope:dragon.var:gene_dragon_secondary_hue
			}
			set_variable = {
				name = gene_dragon_secondary_value
				value = scope:dragon.var:gene_dragon_secondary_value
			}
			set_variable = {
				name = gene_dragon_tertiary_hue
				value = scope:dragon.var:gene_dragon_tertiary_hue
			}
			set_variable = {
				name = gene_dragon_tertiary_value
				value = scope:dragon.var:gene_dragon_tertiary_value
			}
			set_variable = {
				name = gene_dragon_eye_color_hue
				value = scope:dragon.var:gene_dragon_eye_color_hue
			}
			set_variable = {
				name = gene_dragon_eye_color_value
				value = scope:dragon.var:gene_dragon_eye_color_value
			}
			set_variable = {
				name = gene_dragon_horn_color_hue
				value = scope:dragon.var:gene_dragon_horn_color_hue
			}
			set_variable = {
				name = gene_dragon_horn_color_value
				value = scope:dragon.var:gene_dragon_horn_color_value
			}
			set_variable = {
				name = gene_dragon_brow_width
				value = scope:dragon.var:gene_dragon_brow_width
			}
			set_variable = {
				name = gene_dragon_cheek_width
				value = scope:dragon.var:gene_dragon_cheek_width
			}
			set_variable = {
				name = gene_dragon_chin_profile
				value = scope:dragon.var:gene_dragon_chin_profile
			}
			set_variable = {
				name = gene_dragon_crest_depth
				value = scope:dragon.var:gene_dragon_crest_depth
			}
			set_variable = {
				name = gene_dragon_head_roundness
				value = scope:dragon.var:gene_dragon_head_roundness
			}
			set_variable = {
				name = gene_dragon_horns_eyebrow_length
				value = scope:dragon.var:gene_dragon_horns_eyebrow_length
			}
			set_variable = {
				name = gene_dragon_main_horn_shape_template
				value = scope:dragon.var:gene_dragon_main_horn_shape_template
			}
			set_variable = {
				name = gene_dragon_main_horn_shape_value
				value = scope:dragon.var:gene_dragon_main_horn_shape_value
			}
			set_variable = {
				name = gene_dragon_body_shading_template
				value = scope:dragon.var:gene_dragon_body_shading_template
			}
			set_variable = {
				name = gene_dragon_body_shading_value
				value = scope:dragon.var:gene_dragon_body_shading_value
			}
			set_variable = {
				name = gene_dragon_wings_shading_template
				value = scope:dragon.var:gene_dragon_wings_shading_template
			}
			set_variable = {
				name = gene_dragon_wings_shading_value
				value = scope:dragon.var:gene_dragon_wings_shading_value
			}
			set_variable = {
				name = gene_dragon_jaw_width
				value = scope:dragon.var:gene_dragon_jaw_width
			}
			set_variable = {
				name = gene_dragon_lower_jaw_height
				value = scope:dragon.var:gene_dragon_lower_jaw_height
			}
			set_variable = {
				name = gene_dragon_lower_jaw_width
				value = scope:dragon.var:gene_dragon_lower_jaw_width
			}
			set_variable = {
				name = gene_dragon_old_neck
				value = scope:dragon.var:gene_dragon_old_neck
			}
			set_variable = {
				name = gene_dragon_outer_brow_height
				value = scope:dragon.var:gene_dragon_outer_brow_height
			}
			set_variable = {
				name = gene_dragon_snout_height
				value = scope:dragon.var:gene_dragon_snout_height
			}
			set_variable = {
				name = gene_dragon_snout_length
				value = scope:dragon.var:gene_dragon_snout_length
			}
			set_variable = {
				name = gene_dragon_snout_profile
				value = scope:dragon.var:gene_dragon_snout_profile
			}
			set_variable = {
				name = gene_dragon_snout_width
				value = scope:dragon.var:gene_dragon_snout_width
			}
			set_variable = {
				name = gene_dragon_upper_jaw_width
				value = scope:dragon.var:gene_dragon_upper_jaw_width
			}
			set_variable = {
				name = gene_dragon_center_fin_size
				value = scope:dragon.var:gene_dragon_center_fin_size
			}
			set_variable = {
				name = gene_dragon_back_spike_size
				value = scope:dragon.var:gene_dragon_back_spike_size
			}
			set_variable = {
				name = gene_dragon_horns_eyebrow
				value = scope:dragon.var:gene_dragon_horns_eyebrow
			}
			set_variable = {
				name = gene_dragon_neck_spike_size
				value = scope:dragon.var:gene_dragon_neck_spike_size
			}
			set_variable = {
				name = gene_dragon_side_fin_size
				value = scope:dragon.var:gene_dragon_side_fin_size
			}
			set_variable = {
				name = gene_dragon_snout_end_width
				value = scope:dragon.var:gene_dragon_snout_end_width
			}
			set_variable = {
				name = gene_dragon_neck_length
				value = scope:dragon.var:gene_dragon_neck_length
			}
			set_variable = {
				name = gene_dragon_metallic_scales_strength
				value = scope:dragon.var:gene_dragon_metallic_scales_strength
			}
			set_variable = {
				name = gene_dragon_wounded
				value = scope:dragon.var:gene_dragon_wounded
			}
			set_variable = {
				name = gene_dragon_tail_length
				value = scope:dragon.var:gene_dragon_tail_length
			}
			set_variable = {
				name = gene_dragon_primary_color_hue
				value = scope:dragon.var:gene_dragon_primary_color_hue
			}
			scope:dragon = {
				remove_variable = dragon_age
				remove_variable = dragon_size
				remove_variable = gene_dragon_primary_color_value
				remove_variable = gene_dragon_secondary_hue
				remove_variable = gene_dragon_secondary_value
				remove_variable = gene_dragon_tertiary_hue
				remove_variable = gene_dragon_tertiary_value
				remove_variable = gene_dragon_eye_color_hue
				remove_variable = gene_dragon_eye_color_value
				remove_variable = gene_dragon_horn_color_hue
				remove_variable = gene_dragon_horn_color_value
				remove_variable = gene_dragon_brow_width
				remove_variable = gene_dragon_cheek_width
				remove_variable = gene_dragon_chin_profile
				remove_variable = gene_dragon_crest_depth
				remove_variable = gene_dragon_head_roundness
				remove_variable = gene_dragon_horns_eyebrow_length
				remove_variable = gene_dragon_main_horn_shape_template
				remove_variable = gene_dragon_main_horn_shape_value
				remove_variable = gene_dragon_body_shading_template
				remove_variable = gene_dragon_body_shading_value
				remove_variable = gene_dragon_wings_shading_template
				remove_variable = gene_dragon_wings_shading_value
				remove_variable = gene_dragon_jaw_width
				remove_variable = gene_dragon_lower_jaw_height
				remove_variable = gene_dragon_lower_jaw_width
				remove_variable = gene_dragon_old_neck
				remove_variable = gene_dragon_outer_brow_height
				remove_variable = gene_dragon_snout_height
				remove_variable = gene_dragon_snout_length
				remove_variable = gene_dragon_snout_profile
				remove_variable = gene_dragon_snout_width
				remove_variable = gene_dragon_upper_jaw_width
				remove_variable = gene_dragon_center_fin_size
				remove_variable = gene_dragon_back_spike_size
				remove_variable = gene_dragon_horns_eyebrow
				remove_variable = gene_dragon_neck_spike_size
				remove_variable = gene_dragon_side_fin_size
				remove_variable = gene_dragon_snout_end_width
				remove_variable = gene_dragon_neck_length
				remove_variable = gene_dragon_metallic_scales_strength
				remove_variable = gene_dragon_wounded
				remove_variable = gene_dragon_tail_length
				remove_variable = gene_dragon_primary_color_hue
				remove_variable = dragon_size_base
			}
		}
	}

	# dragon_size effect group - Keep the dragon's stored dragon_size equal to the displayed value
	effect_group = {
		days = 0
		triggered_effect = {
			trigger = {
				always = yes
			}
			effect = {
				scope:story = {
					set_variable = {
						name = dragon_size
						value = scope:story.var:dragon_id.dragon_size
					}
				}
			}
		}
	}

	on_end = {
	}

	on_owner_death = {
		#make_story_owner = title:c_ruins.holder
	}
}