GetDragonTypeTooltip = {
	type = character

	text = {
		trigger = {
			NOT = { has_character_flag = owned_dragon }
		}
		localization_key = WILD_DRAGON_TOOLTIP
	}

	text = {
		trigger = {
			has_character_flag = owned_dragon
			var:current_rider ?= {
				is_current_dragonrider = yes
			}
		}
		localization_key = TAMED_DRAGON_TOOLTIP
	}

	text = {
		trigger = {
			has_character_flag = owned_dragon
		}
		localization_key = OWNED_DRAGON_TOOLTIP
	}
}

GetDragonTypeGuiTooltip = {
	type = character

	text = {
		trigger = {
			NOT = { has_character_flag = owned_dragon }
		}
		localization_key = WILD_DRAGON_GUI_TOOLTIP
	}

	text = {
		trigger = {
			has_character_flag = owned_dragon
			var:current_rider ?= {
				is_current_dragonrider = yes
			}
		}
		localization_key = TAMED_DRAGON_GUI_TOOLTIP
	}

	text = {
		trigger = {
			has_character_flag = owned_dragon
		}
		localization_key = OWNED_DRAGON_GUI_TOOLTIP
	}
}

GetDragonEnvironment = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			has_trait = dragon
		}
		localization_key = environment_dragonpit
	}
}

GetDragonSheHe = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = CHARACTER_SHEHE_HE
	}

	text = {
		trigger = { is_male = yes }
		localization_key = CHARACTER_SHEHE_HE
	}

	text = {
		trigger = { is_female = yes }
		localization_key = CHARACTER_SHEHE_SHE
	}
}

GetDragonHerHim = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = CHARACTER_HERHIM_HIM
	}

	text = {
		trigger = { is_male = yes }
		localization_key = CHARACTER_HERHIM_HIM
	}

	text = {
		trigger = { is_female = yes }
		localization_key = CHARACTER_HERHIM_HER
	}
}

GetDragonHerselfHimself = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = CHARACTER_HIMSELF
	}

	text = {
		trigger = { is_male = yes }
		localization_key = CHARACTER_HIMSELF
	}

	text = {
		trigger = { is_female = yes }
		localization_key = CHARACTER_HERSELF
	}
}

GetDragonHerHis = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = CHARACTER_HERHIS_HIS
	}

	text = {
		trigger = { is_male = yes }
		localization_key = CHARACTER_HERHIS_HIS
	}

	text = {
		trigger = { is_female = yes }
		localization_key = CHARACTER_HERHIS_HER
	}
}

DragonGirlBoy = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = boy
	}

	text = {
		trigger = { is_male = yes }
		localization_key = boy
	}

	text = {
		trigger = { is_female = yes }
		localization_key = girl
	}
}

DragonFemaleMale = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			has_variable = dragon_gender_hidden
		}
		localization_key = gender_male
	}

	text = {
		trigger = { is_male = yes }
		localization_key = gender_male
	}

	text = {
		trigger = { is_female = yes }
		localization_key = gender_female
	}
}

DragonOwner = {
	type = character

	text = { # Landed
		trigger = {
			is_alive = yes
			is_landed = yes
			any_relation = {
				type = agot_dragon
				is_alive = yes
			}
		}
		localization_key = dragon_owner_landed
	}

	text = { # Unlanded
		trigger = {
			is_alive = yes
			is_landed = no
			NOR = {
				AND = {
					dynasty ?= dynasty:dynn_Targaryen
					NOT = { has_trait = bastard }
				}
				AND = {
					NOT = { exists = primary_title }
					primary_spouse.dynasty ?= dynasty:dynn_Targaryen
					primary_spouse = {
						NOT = { has_trait = bastard }
					}
				}
			}
			any_relation = {
				type = agot_dragon
				is_alive = yes
			}
		}
		localization_key = dragon_owner_unlanded
	}

	text = { # Targ Prince/Princess
		trigger = {
			is_alive = yes
			is_landed = no
			OR = {
				AND = {
					dynasty ?= dynasty:dynn_Targaryen
					NOT = { has_trait = bastard }
				}
				AND = {
					NOT = { exists = primary_title }
					primary_spouse.dynasty ?= dynasty:dynn_Targaryen
					primary_spouse = {
						NOT = { has_trait = bastard }
					}
				}
			}
			any_relation = {
				type = agot_dragon
				is_alive = yes
			}
			title:e_the_iron_throne = {
				place_in_line_of_succession = {
					target = root
					value <= 25
				}
			}
		}
		localization_key = dragon_owner_landed
	}

	text = { # Dorne Prince/Princess
		trigger = {
			OR = {
				agot_kingdom_tier_is_real_kingdom_trigger = yes
				vassal_contract_has_flag = has_palatinate_contract
				has_inactive_trait = had_palatinate_contract
				AND = {
					game_start_date > 8220.1.1
					exists = character:Martell_80
					this = character:Martell_80
				}
				AND = {
					game_start_date > 8230.1.1
					exists = character:Martell_83
					this = character:Martell_83
				}
				AND = {
					game_start_date > 8251.1.1
					exists = character:Martell_86
					this = character:Martell_86
				}
			}
			culture = { has_cultural_pillar = heritage_rhoynish }
		}
		localization_key = dragon_owner_landed
	}
}

GetDragonColor = {
	type = character

	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:grey
		}
		localization_key = dragon_grey_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:white
		}
		localization_key = dragon_white_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:black
		}
		localization_key = dragon_black_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:red
		}
		localization_key = dragon_red_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:orange
		}
		localization_key = dragon_orange_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:yellow
		}
		localization_key = dragon_yellow_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:green
		}
		localization_key = dragon_green_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:teal
		}
		localization_key = dragon_teal_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:blue
		}
		localization_key = dragon_blue_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:purple
		}
		localization_key = dragon_purple_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:pink
		}
		localization_key = dragon_pink_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:fuschia
		}
		localization_key = dragon_fuschia_key
	}
}

GetDragonColorGrade = {
	type = character
	text = {
		trigger = {
			is_alive = yes
			var:color_grading ?= flag:lightest
		}
		localization_key = dragon_lightest_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color_grading ?= flag:lighter
		}
		localization_key = dragon_lighter_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color_grading ?= flag:middle
		}
		localization_key = dragon_middle_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color_grading ?= flag:darker
		}
		localization_key = dragon_darker_key
	}
	text = {
		trigger = {
			is_alive = yes
			var:color_grading ?= flag:darkest
		}
		localization_key = dragon_darkest_key
	}
}

GetDragonColorFull = {
	type = character

	# Because white, grey, black are defined by hues it doesn't make sense to include gradings in descirption
	# It would *always* be light white, dark grey, dark black
	# We could adjust color grading assigning for these cases if we wanted

	# Actually, spawned white/grey/black dragons don't even get assigned gradings flags so this is necessary already
	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:white
		}
		localization_key = dragon_white_key
	}

	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:grey
		}
		localization_key = dragon_grey_key
	}

	text = {
		trigger = {
			is_alive = yes
			var:color ?= flag:black
		}
		localization_key = dragon_black_key
	}

	text = {
		localization_key = dragon_color_full
	}
}