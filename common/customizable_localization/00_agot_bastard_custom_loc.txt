SurnameSwitch = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_flowers
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:honeywiner
						culture = culture:marcher
						culture = culture:reachman
						culture = culture:shieldman
						culture = culture:vineman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_flowers
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_hill
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:westerman
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_hill
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_pyke
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:ironborn
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_pyke
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_rivers
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:riverlander
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_rivers
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_sand
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:greenblood
						culture = culture:salt_dornish
						culture = culture:sand_dornish
						culture = culture:stone_dornish
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_sand
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_snow
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:barrowman
						culture = culture:bearman
						culture = culture:crannogman
						culture = culture:fangman
						culture = culture:first_man
						culture = culture:forestman
						culture = culture:frozen_shoreman
						culture = culture:harborman
						culture = culture:hill_clansman
						culture = culture:hornfoot
						culture = culture:ice_riverman
						culture = culture:krakenman
						culture = culture:lakeman
						culture = culture:nightrunner
						culture = culture:northman
						culture = culture:skagosi
						culture = culture:thenn
						culture = culture:wolfswood_clansman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_snow
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_stone
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:fingerman
						culture = culture:moonman
						culture = culture:valeman
						culture = culture:sisterman
						culture = culture:mountain_clansman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_stone
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_storm
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:stormlander
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_storm
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_waters
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:clawman
						culture = culture:crownlander
						culture = culture:westerosi_valyrian
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_waters
	}

	text = {
		trigger = {
		}
		fallback = yes
		localization_key = regular_surname
	}
}

SurnameSwitchPossessive = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_flowers
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:honeywiner
						culture = culture:marcher
						culture = culture:reachman
						culture = culture:shieldman
						culture = culture:vineman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_flowers_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_hill
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:westerman
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_hill_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_pyke
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:ironborn
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_pyke_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_rivers
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:riverlander
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_rivers_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_sand
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:greenblood
						culture = culture:salt_dornish
						culture = culture:sand_dornish
						culture = culture:stone_dornish
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_sand_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_snow
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:barrowman
						culture = culture:bearman
						culture = culture:crannogman
						culture = culture:fangman
						culture = culture:first_man
						culture = culture:forestman
						culture = culture:frozen_shoreman
						culture = culture:harborman
						culture = culture:hill_clansman
						culture = culture:hornfoot
						culture = culture:ice_riverman
						culture = culture:krakenman
						culture = culture:lakeman
						culture = culture:nightrunner
						culture = culture:northman
						culture = culture:skagosi
						culture = culture:thenn
						culture = culture:wolfswood_clansman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_snow_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_stone
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:fingerman
						culture = culture:moonman
						culture = culture:valeman
						culture = culture:sisterman
						culture = culture:mountain_clansman
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_stone_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_storm
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					culture = culture:stormlander
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_storm_possessive
	}

	text = {
		trigger = {
			OR = {
				has_inactive_trait = surname_waters
				AND = {
					has_trait = bastard
					faith = {
						NOT = { has_doctrine_parameter = bastards_none }
					}
					OR = {
						culture = culture:clawman
						culture = culture:crownlander
						culture = culture:westerosi_valyrian
					}
					NOR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
			}
		}
		localization_key = bastard_surname_waters_possessive
	}

	text = {
		trigger = {
		}
		fallback = yes
		localization_key = regular_surname
	}
}

TitleSuffix = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			OR = {
				is_ruler = yes
				highest_held_title_tier >= tier_barony
			}
		}
		localization_key = of_title_loc
	}

	text = {
		trigger = {
			NOR = {
				is_ruler = yes
				highest_held_title_tier >= tier_barony
			}
			primary_spouse ?= {
				OR = {
					is_ruler = yes
					highest_held_title_tier >= tier_barony
				}
			}
		}
		localization_key = of_title_spouse_loc
	}

	text = {
		trigger = {
			NOR = {
				is_ruler = yes
				highest_held_title_tier >= tier_kingdom
				OR = {
					has_trait = bastard
					AND = {
						has_trait = legitimized_bastard
						OR = {
							has_inactive_trait = surname_flowers
							has_inactive_trait = surname_hill
							has_inactive_trait = surname_pyke
							has_inactive_trait = surname_rivers
							has_inactive_trait = surname_sand
							has_inactive_trait = surname_snow
							has_inactive_trait = surname_stone
							has_inactive_trait = surname_storm
							has_inactive_trait = surname_waters
						}
					}
				}
				has_trait = silent_sister
				AND = {
					OR = {
						has_trait = knight
						AND = {
							has_trait_xp = {
								trait = squire
								track = knight
								value >= 100
							}
							OR = {
								age >= 16 #You are at least 16
								AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
									age < 16
									age >= 12
									#Youngest knight was Daemon Blackfyre
									prowess >= extremely_high_skill_rating
								}
							}
						}
					}
					NOR = {
						father ?= {
							primary_title.tier >= tier_kingdom
							OR = {
								AND = {
									primary_title.holder ?= {
										exists = yes
									}
									primary_title ?= title:k_dragonstone
									dynasty ?= dynasty:dynn_Targaryen
									agot_is_independent_ruler = no
								}
								primary_title.holder ?= {
									exists = yes
									OR = {
										agot_is_independent_ruler = yes
										vassal_contract_has_flag = has_palatinate_contract
									}
								}
							}
							NOT = {
								has_government = free_city_government
							}
						}
						mother ?= {
							primary_title.tier >= tier_kingdom
							OR = {
								AND = {
									primary_title.holder ?= {
										exists = yes
									}
									primary_title ?= title:k_dragonstone
									dynasty ?= dynasty:dynn_Targaryen
									agot_is_independent_ruler = no
								}
								primary_title.holder ?= {
									exists = yes
									OR = {
										agot_is_independent_ruler = yes
										vassal_contract_has_flag = has_palatinate_contract
									}
								}
							}
							NOT = {
								has_government = free_city_government
							}
						}
					}
				}
				OR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
			}
			father ?= {
				highest_held_title_tier >= tier_kingdom
				primary_title.holder ?= {
					exists = yes
				}
			}
		}
		localization_key = of_title_father_loc
	}

	text = {
		trigger = {
			NOR = {
				is_ruler = yes
				highest_held_title_tier >= tier_kingdom
				OR = {
					has_trait = bastard
					AND = {
						has_trait = legitimized_bastard
						OR = {
							has_inactive_trait = surname_flowers
							has_inactive_trait = surname_hill
							has_inactive_trait = surname_pyke
							has_inactive_trait = surname_rivers
							has_inactive_trait = surname_sand
							has_inactive_trait = surname_snow
							has_inactive_trait = surname_stone
							has_inactive_trait = surname_storm
							has_inactive_trait = surname_waters
						}
					}
				}
				has_trait = silent_sister
				AND = {
					OR = {
						has_trait = knight
						AND = {
							has_trait_xp = {
								trait = squire
								track = knight
								value >= 100
							}
							OR = {
								age >= 16 #You are at least 16
								AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
									age < 16
									age >= 12
									#Youngest knight was Daemon Blackfyre
									prowess >= extremely_high_skill_rating
								}
							}
						}
					}
					NOR = {
						father ?= {
							primary_title.tier >= tier_kingdom
							OR = {
								AND = {
									primary_title.holder ?= {
										exists = yes
									}
									primary_title ?= title:k_dragonstone
									dynasty ?= dynasty:dynn_Targaryen
									agot_is_independent_ruler = no
								}
								primary_title.holder ?= {
									exists = yes
									OR = {
										agot_is_independent_ruler = yes
										vassal_contract_has_flag = has_palatinate_contract
									}
								}
							}
							NOT = {
								has_government = free_city_government
							}
						}
						mother ?= {
							primary_title.tier >= tier_kingdom
							OR = {
								AND = {
									primary_title.holder ?= {
										exists = yes
									}
									primary_title ?= title:k_dragonstone
									dynasty ?= dynasty:dynn_Targaryen
									agot_is_independent_ruler = no
								}
								primary_title.holder ?= {
									exists = yes
									OR = {
										agot_is_independent_ruler = yes
										vassal_contract_has_flag = has_palatinate_contract
									}
								}
							}
							NOT = {
								has_government = free_city_government
							}
						}
					}
				}
				OR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
			}
			mother ?= {
				highest_held_title_tier >= tier_kingdom
				primary_title.holder ?= {
					exists = yes
				}
			}
			father ?= {
				highest_held_title_tier < tier_kingdom
				primary_title.holder ?= {
					exists = yes
				}
			}
		}
		localization_key = of_title_mother_loc
	}
}

WordSpace = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			OR = {
				is_human = no
				AND = {
					is_lowborn = yes
					agot_bastard_surname_trigger = no
				}
			}
		}
		localization_key = word_no_space
	}
	text = {
		trigger = {
			NOR = {
				is_human = no
				AND = {
					is_lowborn = yes
					agot_bastard_surname_trigger = no
				}
			}
		}
		localization_key = word_with_space
	}
}

AdditionalWordSpace = {
	type = character
	log_loc_errors = no
	text = {
		trigger = {
			OR = {
				is_human = no
				AND = {
					AND = {
						is_lowborn = yes
						NOR = {
							any_spouse = {
								is_ruler = yes
							}
							any_spouse = {
								primary_title.tier >= tier_barony
							}
							is_ruler = yes
							primary_title.tier >= tier_barony
						}
					}
					agot_bastard_surname_trigger = no
				}
			}
		}
		localization_key = word_no_space
	}
	text = {
		trigger = {
			NOR = {
				is_human = no
				AND = {
					is_lowborn = yes
					NOR = {
						is_ruler = yes
						primary_title.tier >= tier_barony
						any_spouse = {
							is_ruler = yes
						}
						any_spouse = {
							primary_title.tier >= tier_barony
						}
					}
				}
			}
		}
		localization_key = word_with_space
	}
}