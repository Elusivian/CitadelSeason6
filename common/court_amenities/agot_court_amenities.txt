agot_dragonpit_amenities = {
	default = agot_dragonpit_amenities_default

	agot_dragonpit_amenities_default = {
		can_pick = {
			OR = {
				agot_can_use_dragonpit_amenities = no
				agot_has_an_active_dragonpit = yes
			}
		}
		owner_modifier_description = agot_dragonpit_amenities_default_owner
		ai_will_do = {
			value = 0 # Only if only option
		}
	}

	# Level 2 - Low Funding
	agot_dragonpit_amenities_small = {
		can_pick = {
			agot_can_use_dragonpit_amenities = yes
		}
		cost = {
			round = no
			gold = agot_dragonpit_amenities_small_cost
		}
		owner_modifier = {
			court_grandeur_baseline_add = 8
			enemy_hostile_scheme_phase_duration_add = 2
			monthly_prestige = 0.2
		}
		owner_modifier_description = agot_dragonpit_amenities_small_owner

		ai_will_do = {
			value = 0
			if = {
				limit = {
					# Greedy characters without dragons are more likely to neglect the dragonpit
					AND = {
						ai_greed > 75
						NOT = {
							has_trait = dragonrider
						}
					}
				}
				add = 20
			}
			if = {
				limit = {
					government_has_flag = government_is_tribal
				}
				add = -1000
			}
		}
	}

	# Level 3 - Medium Funding
	agot_dragonpit_amenities_middling = {
		can_pick = {
			agot_can_use_dragonpit_amenities = yes
		}
		cost = {
			round = no
			gold = agot_dragonpit_amenities_middling_cost
		}
		owner_modifier = {
			court_grandeur_baseline_add = 12
			enemy_hostile_scheme_phase_duration_add = 4
			monthly_prestige = 0.6
		}

		owner_modifier_description = agot_dragonpit_amenities_middling_owner

		ai_will_do = {
			value = 90
			if = {
				limit = {
					any_courtier = {
						has_trait = dragon
						count >= 4
					}
				}
				add = 20
			}
			if = {
				limit = {
					government_has_flag = government_is_tribal
				}
				add = -1000
			}
		}

	}

	# Level 4 - High Funding
	agot_dragonpit_amenities_spacious = {
		can_pick = {
			agot_can_use_dragonpit_amenities = yes
		}
		cost = {
			round = no
			gold = agot_dragonpit_amenities_spacious_cost
		}
		owner_modifier = {
			court_grandeur_baseline_add = 16
			enemy_hostile_scheme_phase_duration_add = 8
			monthly_prestige = 1.0
		}

		owner_modifier_description = agot_dragonpit_amenities_spacious_owner

		ai_will_do = {
			value = 65

			if = {
				limit = {
					any_courtier = {
						has_trait = dragon
						count >= 6
					}
				}
				add = 40
			}
			if = {
				limit = {
					house ?= {
						has_house_modifier = dragonrider_house_modifier
						any_house_member = {
							count >= 3
							has_trait = dragonrider
						}
					}
				}
				add = 40
			}
			if = {
				limit = {
					government_has_flag = government_is_tribal
				}
				add = -1000
			}
		}
	}

	# Level 5 - Grand Funding
	agot_dragonpit_amenities_grand = {
		can_pick = {
			agot_can_use_dragonpit_amenities = yes
		}
		cost = {
			round = no
			gold = agot_dragonpit_amenities_grand_cost
		}
		owner_modifier = {
			court_grandeur_baseline_add = 20
			enemy_hostile_scheme_phase_duration_add = 10
			monthly_prestige = 1.5
		}
		owner_modifier_description = agot_dragonpit_amenities_grand_owner
		ai_will_do = {
			value = 50
			if = {
				limit = {
					any_courtier = {
						has_trait = dragon
						count >= 8
					}
				}
				add = 65
			}
			if = {
				limit = {
					house ?= {
						has_house_modifier = dragonrider_house_modifier
						any_house_member = {
							count >= 6
							has_trait = dragonrider
						}
					}
				}
				add = 50
			}
			if = {
				limit = {
					government_has_flag = government_is_tribal
				}
				add = -1000
			}
		}
	}
}



