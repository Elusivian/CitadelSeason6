agot_spawn_owned_adult_dragon_effect = {
	create_character = {
		location = location
		trait = dragon
		age = { 30 100 }
		template = agot_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	save_scope_as = owner

	hidden_effect = {
		agot_set_as_owned_dragon = {
			OWNER = scope:owner
			DRAGON = scope:dragon
		}
	}

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_dragon_effect.interface.t
		desc = agot_spawn_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_owned_hatchling_from_egg_effect = {
	$OWNER$ = { save_scope_as = owner }
	$EGG$ = { save_scope_as = egg }

	if = {
		limit = {
			has_game_rule = agot_canon_dragons_enabled
			exists = scope:cradlemate
			scope:cradlemate ?= {
				agot_has_canon_cradle_egg = yes
				NOT = { has_character_flag = hatched_canon_dragon }
			}
		}
		scope:cradlemate = { add_character_flag = hatched_canon_dragon }
		agot_spawn_canon_cradle_dragon_effect = { CRADLEMATE = scope:cradlemate }
	}
	else = {
		create_character = {
			location = $OWNER$.location
			template = agot_dragon_hatchling_template
			random_traits = no
			save_scope_as = dragon
		}
	}

	agot_dragon_revival_effect = yes

	hidden_effect = {
		agot_set_as_owned_dragon = {
			OWNER = scope:owner
			DRAGON = scope:dragon
		}
	}

	agot_remove_dragon_egg = { EGG = $EGG$ }

	scope:owner = {
		send_interface_message = {
			type = event_generic_good_text
			title = agot_spawn_dragon_effect.interface.t
			desc = agot_spawn_dragon_effect.interface.desc

			left_icon = scope:dragon
		}
	}
}

agot_spawn_bonded_hatchling_from_egg_effect = {
	agot_spawn_owned_hatchling_from_egg_effect =  { OWNER = $OWNER$ EGG = $EGG$ }

	create_character_memory = {
		type = agot_hatched_egg
		participants = {
			dragon = scope:dragon
		}
	}

	agot_bond_dragon_relation_effect = {
		ACTOR = $OWNER$
		DRAGON = scope:dragon
	}

	if = {
		limit = { exists = scope:cradlemate }
		scope:dragon = {
			set_variable = {
				name = cradlemate
				value = scope:cradlemate
			}
			if = {
				limit = {
					scope:cradlemate = { has_variable = destiny_child }
				}
				add_trait = dragon_destined
			}
		}
	}
}

agot_spawn_wild_hatchling_from_egg_effect = {
	create_character = {
		location = location
		template = agot_dragon_hatchling_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	agot_remove_dragon_egg = { EGG = $EGG$ }
}

agot_spawn_wild_dragon_effect = {
	create_character = {
		location = capital_province
		trait = dragon
		age = { 30 100 }
		template = agot_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	add_courtier = scope:dragon
	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_wild_dragon_effect.interface.t
		desc = agot_spawn_wild_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_wild_child_dragon_effect = {
	create_character = {
		location = capital_province
		trait = dragon
		age = 0
		template = agot_dragon_hatchling_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_wild_dragon_effect.interface.t
		desc = agot_spawn_wild_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_young_dragon_effect = {
	create_character = {
		location = location
		template = agot_young_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_dragon_effect.interface.t
		desc = agot_spawn_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_adult_dragon_effect = {
	create_character = {
		location = location
		template = agot_adult_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_dragon_effect.interface.t
		desc = agot_spawn_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_old_dragon_effect = {
	create_character = {
		location = location
		template = agot_old_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_dragon_effect.interface.t
		desc = agot_spawn_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_spawn_monster_dragon_effect = {
	create_character = {
		location = location
		template = agot_monster_dragon_template
		random_traits = no
		save_scope_as = dragon
	}

	agot_dragon_revival_effect = yes

	send_interface_message = {
		type = event_generic_good_text
		title = agot_spawn_dragon_effect.interface.t
		desc = agot_spawn_dragon_effect.interface.desc

		left_icon = scope:dragon
	}
}

agot_populate_dragons = { # For debugging purposes
	every_ruler = {
		limit = {
			age >= 16
		}
		random_list = {
			95 = {}
			5 = {
				agot_spawn_owned_adult_dragon_effect = yes
				save_scope_as = recipient
				if = {
					limit = { exists = scope:dragon }
					agot_tame_dragon = {
						TAMER = scope:recipient
						DRAGON = scope:dragon
					}
				}
			}
		}
	}
}