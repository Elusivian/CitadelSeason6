# AGOT Points of Interests
agot_poi_dragonlore = {
	build_province_list = {
		province:4152 = {
			if = {
				limit = {
					OR = {
						has_building = dragonpit_ruins_01
						has_building = dragonpit_ruins_02
					}
				}
				add_to_list = provinces
			}
		}
		province:4415 = {
			add_to_list = provinces
		}
		province:3499 = {
			add_to_list = provinces
		}
		province:4797 = {
			if = {
				limit = { has_building = agot_summerhall_ruins_01 }
				add_to_list = provinces
			}
		}
		province:1934 = {
			if = {
				limit = { game_start_date > 7999.8.15 }
				add_to_list = provinces
			}
		}
		province:3953 = {
			if = {
				limit = { game_start_date > 8000.5.1 }
				add_to_list = provinces
			}
		}
		province:3655 = {
			if = {
				limit = { game_start_date > 8142.1.1 } #Silverwing's death
				add_to_list = provinces
			}
		}
	}

	on_visit = {
		switch = { # Trigger the appropriate event based on the location
			trigger = location
			province:4152 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0001 } } #Rhaenys Hill
			province:4415 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0002 } } #Dragonstone
			province:3499 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0003 } } #Citadel
			province:4797 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0004 } } #Summerhall
			province:1934 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0005 } } #Harrenhal
			province:3953 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0006 } } #Fields of fire
			province:3655 = {  root = { trigger_event = agot_dragon_hatching_dragonlore.0007 } } #Red Lake/Silverwing's Lair
		}
		custom_tooltip = agot_poi_dragonlore_tt
	}
}

agot_poi_wild_dragon = {
	build_province_list = {
		every_living_dragon = {
			limit = {
				NOR = {
					has_variable = current_rider
					has_character_flag = owned_dragon
				}
				dragon_size >= dragon_taming_minimum_size
			}

			location = { add_to_list = provinces }
		}
	}
	on_visit = {}
}

agot_poi_historical_battle = {
	build_province_list = {
		# STATIC ONES
		province:2718 = { add_to_list = provinces } # Rape of the Sisters
		province:1692 = { add_to_list = provinces } # End of the Mudds
		province:2255 = { add_to_list = provinces } # Battle of Seven Stars
		province:1630 = { add_to_list = provinces } # Feast of Skane
		province:381 =  { add_to_list = provinces } # Battle of the Weeping water
		province:1912 =  { add_to_list = provinces } # Teague's Crowning
		# DYNAMIC ONES
		if = {
			limit = {game_start_date > 8290.1.1 }
			province:2865 =  { add_to_list = provinces } # Burning of Lannisport
		}
		if = {
			limit = {game_start_date > 8284.1.1 }
			province:1882 =  { add_to_list = provinces } # Ruby Ford
			province:2032 =  { add_to_list = provinces } # Battle of the Bells
		}
		if = {
			limit = {game_start_date > 8282.1.1 }
			province:4864 = { add_to_list = provinces }  #Kingswood Brotherhood
		}
		if = {
			limit = {game_start_date > 8237.1.1 }
			province:7263 =  { add_to_list = provinces } # Battle of Wendwater Bridge
		}
		if = {
			limit = {game_start_date > 8197.1.1 }
			province:4351 =  { add_to_list = provinces } # Redgrass Field
		}
		if = {
			limit = {game_start_date > 8130.5.1}
			province:4424 =  { add_to_list = provinces } # Sack of High Tide
		}
		if = {
			limit = {game_start_date > 8037.1.1 }
			province:5463 =  { add_to_list = provinces } # Vulture Hunts
		}
		if = {
			limit = {game_start_date > 7999.9.10 }
			province:4461 =  { add_to_list = provinces } # Last Storm
		}
		if = {
			limit = {game_start_date > 7999.8.15 }
			province:1934 =  { add_to_list = provinces } # Harrenhall
		}
		if = {
			limit = {game_start_date > 8000.5.1 }
			province:3953 =  { add_to_list = provinces } # Field of Fire
		}
	}

	on_visit = {
		send_interface_toast = {
			title = agot_poi_historical_battle.visit
			left_icon = root
			custom_tooltip = agot_poi_historical_battle.visit.tt
		}
		add_martial_lifestyle_xp = travel_medium_xp
		traveler_travel_xp_effect = {
			MIN = 3
			MAX = 5
		}
	}
}

agot_poi_castle_martial = {
	build_province_list = {
		province:2455 = { add_to_list = provinces } # Runestone
		province:1 = { add_to_list = provinces } # Nightfort
		province:8 = { add_to_list = provinces } # Shadow Tower
		province:5 = { add_to_list = provinces } # Castle Black
		province:14 = { add_to_list = provinces } # Eastwatch
		province:3320 = { add_to_list = provinces } # Starpike
		province:4005 = { add_to_list = provinces } # Bitterbridge
		province:4104 = { add_to_list = provinces } # Shield Islands
		province:3295 = { add_to_list = provinces } # Ashford
		province:3354 = { add_to_list = provinces } # Horn Hill
		province:3067 = { add_to_list = provinces } # Golden Tooth
		province:2723 = { add_to_list = provinces } # Pyke
		province:1650 = { add_to_list = provinces } # Moat Cailin
		province:6028 = { add_to_list = provinces } # Fist of the first men
		province:2263 = { add_to_list = provinces } # Bloody Gate
		province:4415 = { add_to_list = provinces } # Dragonstone
		province:4439 = { add_to_list = provinces } # Storm's End
		province:5441 = { add_to_list = provinces } # Wyl
		province:5303 = { add_to_list = provinces } # Yronwood
		province:5153 = { add_to_list = provinces } # Brimstone Hall
	}

	on_visit = {
		send_interface_toast = {
			title = poi_notable_castle_visit
			left_icon = root
			custom_tooltip = poi_notable_castle_visit.tt

			add_martial_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

agot_poi_castle_intrigue = {
	build_province_list = {
		province:3823 = { add_to_list = provinces } # Dunstonbury
		province:4290 = { add_to_list = provinces } # The Whispers
		province:4937 = { add_to_list = provinces } # Sunspear
		if = {
			limit = {game_start_date > 8213.1.1 }
			province:1950 =  { add_to_list = provinces } # Second Blackfyre Rebellion
		}
		if = {
			limit = {game_start_date > 8046.1.1 }
			province:4151 =  { add_to_list = provinces } # Red Keep
		}
		if = {
			limit = {game_start_date > 8011.1.1 }
			province:5135 =  { add_to_list = provinces } # Death of Meraxes
		}
		if = {
			limit = {game_start_date > 8278.1.1 }
			province:4241 =  { add_to_list = provinces } # Defiance of Duskendale
		}
	}

	on_visit = {
		send_interface_toast = {
			title = poi_notable_castle_visit
			left_icon = root
			custom_tooltip = poi_notable_castle_visit.tt

			add_intrigue_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

agot_poi_castle_learning = {
	build_province_list = {
		province:3500 = { add_to_list = provinces } # Starry Sept
		province:3499 = { add_to_list = provinces } # Citadel
		province:3497 = { add_to_list = provinces } # Seven Shrines
		province:2795 = { add_to_list = provinces } # Nagga's Hill
		province:1913 = { add_to_list = provinces } # Jonquil's Pool
		province:432 = { add_to_list = provinces } # Snowy Sept
		province:2624 = { add_to_list = provinces } # Arrival of the Andals
		# province:4155 = { add_to_list = provinces } # Gate of the Gods
		province:5039 = { add_to_list = provinces } # Hammer of the Waters
		# if = {
		# 	limit = { game_start_date < 8043.1.1 }
		# 	province:4152 =  { add_to_list = provinces } # Sept of Remembrance
		# }
		if = {
			limit = { game_start_date > 8176.1.1 }
			province:4153 =  { add_to_list = provinces } # Sept of Baelor
		}
	}

	on_visit = {
		send_interface_toast = {
			title = poi_notable_castle_visit
			left_icon = root
			custom_tooltip = poi_notable_castle_visit.tt

			add_learning_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

agot_poi_castle_diplo = {
	build_province_list = {
		province:3237 = { add_to_list = provinces } # Highgarden
		province:3223 = { add_to_list = provinces } # Fair Isle
		province:2854 = { add_to_list = provinces } # Lonely Light
		province:1658 = { add_to_list = provinces } # Riverrun
		province:1639 = { add_to_list = provinces } # Wrestling with bears (Bear Island)
		province:2251 = { add_to_list = provinces } # Eyrie
		province:1901 = { add_to_list = provinces } # Mountains of the Moon
		province:4364 = { add_to_list = provinces } # Kingswood
		province:4917 = { add_to_list = provinces } # Tarth
		province:4605 = { add_to_list = provinces } # Rainwood
		province:5049 = { add_to_list = provinces } # Dragon Mummer (House Toland)
		province:4938 = { add_to_list = provinces } # Nymeria
		if = {
			limit = {game_start_date > 8046.1.1 }
			province:4151 =  { add_to_list = provinces } # Aegonfort
		}
	}

	on_visit = {
		send_interface_toast = {
			title = poi_notable_castle_visit
			left_icon = root
			custom_tooltip = poi_notable_castle_visit.tt

			add_diplomacy_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

agot_poi_castle_stewardship = {
	build_province_list = {
		province:3493 = { add_to_list = provinces } # Hightower
		province:3494 = { add_to_list = provinces } # Oldtown
		province:3043 = { add_to_list = provinces } # Hornvale
		province:2729 = { add_to_list = provinces } # Lordsport
		province:2189 = { add_to_list = provinces } # Fairmarket
		province:77 = { add_to_list = provinces } # Winterfell
		province:2434 = { add_to_list = provinces } # Gulltown
		province:4927 = { add_to_list = provinces } # Morne
		province:4945 = { add_to_list = provinces } # Plankytown
	}

	on_visit = {
		send_interface_toast = {
			title = poi_notable_castle_visit
			left_icon = root
			custom_tooltip = poi_notable_castle_visit.tt

			add_stewardship_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

poi_special_buildings_intrigue = {
	build_province_list = {
		every_special_building_province = {
			limit = {
				has_building_with_flag = { flag = travel_point_of_interest_intrigue }
			}
			add_to_list = provinces
		}
	}

	on_visit = {
		send_interface_toast = {
			title = poi_special_buildings.visit
			left_icon = root

			add_intrigue_lifestyle_xp = travel_medium_xp
			traveler_danger_xp_effect = {
				MIN = 3
				MAX = 5
			}
		}
	}
}

poi_exploration_target = {
	build_province_list = {
		province:77 = {
			add_to_list = provinces
		}
	}

	on_visit = {
		trigger_event = {
			id = agot_travel_events.1000
		}
		if = {
			limit = {
				NOT = { scope:province.county.holder = root } #If I own it then it does not make sense to visit it.
			}
			custom_tooltip = poi_exploration_event_tt
		}
	}
}

poi_myr_scholastic_guilds = {
	build_province_list = {
		province:7559 = { add_to_list = provinces } # Myr capital barony, has observatory duchy building
	}

	on_visit = {
		trigger_event = {
			id = agot_travel_events.0013
		}
		if = {
			limit = {
				NOT = { scope:province.county.holder = root } #If I own it then it does not make sense to visit it.
				NOT = { has_character_flag = agot_visited_myr_flag }
			}
			custom_tooltip = poi_myr_scholastic_guilds_event_tt
		}
	}
}
